<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amanda Valuation | Business Valuation in 15 Minutes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #2D3748 0%, #38B2AC 100%);
        }
        .nav-link:hover {
            color: #38B2AC;
        }
        .btn-primary {
            background-color: #38B2AC;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #2D3748;
            transform: translateY(-2px);
        }
        .btn-secondary {
            border: 2px solid #38B2AC;
            color: #38B2AC;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #38B2AC;
            color: white;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .testimonial-card {
            transition: all 0.3s ease;
        }
        .testimonial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .progress-bar {
            height: 10px;
            border-radius: 5px;
            background-color: #E2E8F0;
        }
        .progress-fill {
            height: 100%;
            border-radius: 5px;
            background-color: #38B2AC;
            transition: width 0.5s ease;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #2D3748;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #38B2AC;
            cursor: pointer;
        }
        .slider-thumb::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #38B2AC;
            cursor: pointer;
        }
        .input-highlight {
            transition: all 0.3s ease;
        }
        .input-highlight:focus {
            box-shadow: 0 0 0 3px rgba(56, 178, 172, 0.3);
            border-color: #38B2AC;
        }
        .step {
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .step-hidden {
            opacity: 0;
            transform: translateX(20px);
            display: none;
        }
        .step-visible {
            opacity: 1;
            transform: translateX(0);
            display: block;
        }
        .chart-container {
            height: 300px;
            width: 100%;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 250px;
            }
        }
    </style>
</head>
<body class="bg-white">
    <!-- Navigation -->
    <nav class="bg-white shadow-md py-4 sticky top-0 z-50">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center">
                <span class="text-2xl font-bold text-gray-800">Amanda<span class="text-teal-500">Valuation</span></span>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#valuation" class="nav-link text-gray-600 hover:text-teal-500 font-medium">Self Valuation</a>
                <a href="#tech-due-diligence" class="nav-link text-gray-600 hover:text-teal-500 font-medium">Tech Due Diligence</a>
                <a href="#data-room" class="nav-link text-gray-600 hover:text-teal-500 font-medium">AI Data Room</a>
                <a href="#pricing" class="nav-link text-gray-600 hover:text-teal-500 font-medium">Pricing</a>
                <a href="#resources" class="nav-link text-gray-600 hover:text-teal-500 font-medium">Resources</a>
            </div>
            <div class="md:hidden">
                <button id="menu-toggle" class="text-gray-600 focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white px-6 pt-2 pb-4">
            <a href="#valuation" class="block py-2 text-gray-600 hover:text-teal-500">Self Valuation</a>
            <a href="#tech-due-diligence" class="block py-2 text-gray-600 hover:text-teal-500">Tech Due Diligence</a>
            <a href="#data-room" class="block py-2 text-gray-600 hover:text-teal-500">AI Data Room</a>
            <a href="#pricing" class="block py-2 text-gray-600 hover:text-teal-500">Pricing</a>
            <a href="#resources" class="block py-2 text-gray-600 hover:text-teal-500">Resources</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20">
        <div class="container mx-auto px-6 flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-10 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">What's Your Business Worth?</h1>
                <h2 class="text-2xl md:text-3xl font-semibold mb-6">Find Out in 15 Minutes</h2>
                <p class="text-lg mb-8 opacity-90">Get a fast, accurate business valuation and actionable insights with Amanda Valuation's free self-assessment tools.</p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="#valuation" class="btn-primary text-white font-bold py-3 px-8 rounded-lg text-center">Get Started Now</a>
                    <a href="#demo" class="btn-secondary font-bold py-3 px-8 rounded-lg text-center flex items-center justify-center">
                        <i class="fas fa-play-circle mr-2"></i> Watch Demo
                    </a>
                </div>
            </div>
            <div class="md:w-1/2 relative">
                <div class="relative">
                    <div class="absolute inset-0 bg-teal-500 rounded-xl opacity-20 blur-lg"></div>
                    <div class="relative bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg rounded-xl p-6 border border-white border-opacity-20">
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-full bg-red-500 mr-2"></div>
                                <div class="w-3 h-3 rounded-full bg-yellow-500 mr-2"></div>
                                <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            </div>
                            <span class="text-sm font-medium">Valuation Dashboard</span>
                        </div>
                        <div class="bg-white bg-opacity-5 rounded-lg p-4 mb-4">
                            <div class="flex justify-between mb-2">
                                <span class="text-sm">Estimated Value Range</span>
                                <span class="text-sm font-bold">$1.2M - $1.8M</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-2.5">
                                <div class="bg-teal-400 h-2.5 rounded-full" style="width: 70%"></div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="bg-white bg-opacity-5 rounded-lg p-4">
                                <p class="text-xs opacity-70 mb-1">Revenue Growth</p>
                                <p class="text-lg font-bold">32%</p>
                                <div class="flex items-center mt-1">
                                    <i class="fas fa-arrow-up text-green-400 mr-1 text-xs"></i>
                                    <span class="text-xs">+8% from last year</span>
                                </div>
                            </div>
                            <div class="bg-white bg-opacity-5 rounded-lg p-4">
                                <p class="text-xs opacity-70 mb-1">Profit Margin</p>
                                <p class="text-lg font-bold">18%</p>
                                <div class="flex items-center mt-1">
                                    <i class="fas fa-arrow-up text-green-400 mr-1 text-xs"></i>
                                    <span class="text-xs">+3% from last year</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-teal-500 bg-opacity-20 rounded-lg p-3 text-center">
                            <p class="text-sm font-medium">Your Business is in the <span class="font-bold">Top 30%</span> of SaaS Companies</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Video Modal -->
    <div id="demo-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-4xl mx-4 relative">
            <button id="close-modal" class="absolute -top-10 right-0 text-white text-3xl">×</button>
            <div class="aspect-w-16 aspect-h-9">
                <iframe id="demo-video" class="w-full h-96 rounded-t-lg" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="p-6">
                <h3 class="text-2xl font-bold mb-2">See Amanda Valuation in Action</h3>
                <p class="text-gray-600 mb-4">Watch how easy it is to get your business valuation in just 15 minutes with our step-by-step process.</p>
                <a href="#valuation" class="btn-primary text-white font-bold py-2 px-6 rounded-lg inline-block">Start Your Valuation Now</a>
            </div>
        </div>
    </div>

    <!-- Self Valuation Tool -->
    <section id="valuation" class="py-16 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Get Your Business Valuation in 15 Minutes</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Use our advanced valuation tool to assess your business worth with detailed insights and actionable recommendations.</p>
            </div>

            <div class="bg-white rounded-xl shadow-lg overflow-hidden max-w-6xl mx-auto">
                <!-- Progress Bar -->
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Step <span id="current-step">1</span> of 6</h3>
                        <button id="start-over" class="text-teal-500 hover:text-teal-600 font-medium flex items-center">
                            <i class="fas fa-redo-alt mr-2"></i> Start Over
                        </button>
                    </div>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill" style="width: 16.67%"></div>
                    </div>
                </div>

                <!-- Valuation Form -->
         
/* eslint-disable no-undef */
const ValuationForm = () => {
    const totalSteps = 7; // Including summary step
    const [currentStep, setCurrentStep] = React.useState(1);
    const [formData, setFormData] = React.useState(() => {
        const saved = localStorage.getItem('valuationFormData');
        return saved ? JSON.parse(saved) : {
            methods: [],
            ownerSalary: '',
            averageSalary: '',
            employeeBenefits: '',
            staffNumber: '',
            expenses: '',
            debt: '',
            scalability: '5',
            growthRate: '',
            yearsOperating: '',
            ltv: '',
            cac: '',
            churnRate: '',
            customerGrowthRate: '',
            industry: '',
            marketTrendImpact: '5',
            competitivePositioning: '5',
            marketVolatility: '5',
            aiReplaceable: '',
            aiReplaceCount: '',
            hasIP: '',
            ipValue: '',
            ipUnique: '',
            operationalEfficiency: '5',
            projectedRevenue: '',
            expectedGrowthRate: '',
            cashFlow1: '',
            cashFlow2: '',
            cashFlow3: '',
            cashFlow4: '',
            cashFlow5: '',
            discountRate: '',
            terminalGrowthRate: '',
            assets: ''
        };
    });
    const [errors, setErrors] = React.useState({});
    const [isCalculating, setIsCalculating] = React.useState(false);
    const [valuationResult, setValuationResult] = React.useState(null);
    const valuationChartRef = React.useRef(null);
    const staffChartRef = React.useRef(null);
    const incomeChartRef = React.useRef(null);
    const dcfChartRef = React.useRef(null);

    // Save form data to local storage
    React.useEffect(() => {
        localStorage.setItem('valuationFormData', JSON.stringify(formData));
        checkConditionalFields();
    }, [formData]);

    // Validate inputs for the current step
    const validateStep = (step) => {
        const newErrors = {};
        const requiredFields = {
            1: ['methods'],
            2: ['ownerSalary', 'averageSalary', 'staffNumber', 'expenses', 'debt', 'growthRate', 'yearsOperating'],
            3: ['ltv', 'cac', 'churnRate', 'customerGrowthRate'],
            4: ['industry'],
            5: ['aiReplaceable', 'hasIP'],
            6: ['projectedRevenue', 'expectedGrowthRate']
        };

        if (requiredFields[step]) {
            requiredFields[step].forEach(field => {
                if (!formData[field]) {
                    newErrors[field] = 'This field is required';
                }
            });
        }

        if (step === 1 && (formData.methods.length === 0 || formData.methods.length > 3)) {
            newErrors.methods = 'Please select 1 to 3 valuation methods';
        }

        if (step === 5) {
            if (formData.aiReplaceable === 'yes' && !formData.aiReplaceCount) {
                newErrors.aiReplaceCount = 'Please specify number of staff';
            }
            if (formData.hasIP === 'yes' && !formData.ipValue) {
                newErrors.ipValue = 'Please specify IP value';
            }
            if (formData.hasIP === 'yes' && !formData.ipUnique) {
                newErrors.ipUnique = 'Please specify IP uniqueness';
            }
        }

        if (step === 6 && formData.methods.includes('dcf')) {
            ['cashFlow1', 'cashFlow2', 'cashFlow3', 'cashFlow4', 'cashFlow5', 'discountRate', 'terminalGrowthRate'].forEach(field => {
                if (!formData[field]) {
                    newErrors[field] = 'This field is required';
                }
            });
        }

        if (step === 6 && formData.methods.includes('earnings')) {
            if (!formData.assets) {
                newErrors.assets = 'This field is required';
            }
        }

        setErrors(newErrors);
        return Object.keys(newErrors).length === 0;
    };

    // Handle input changes
    const handleInputChange = (e) => {
        const { name, value, type, checked } = e.target;
        let sanitizedValue = DOMPurify.sanitize(value);

        if (type === 'checkbox') {
            setFormData(prev => ({
                ...prev,
                methods: checked
                    ? [...prev.methods, name]
                    : prev.methods.filter(m => m !== name)
            }));
        } else {
            setFormData(prev => ({ ...prev, [name]: sanitizedValue }));
        }
    };

    // Navigation handlers
    const handleNext = () => {
        if (validateStep(currentStep)) {
            setCurrentStep(prev => Math.min(prev + 1, totalSteps));
        }
    };

    const handlePrev = () => {
        setCurrentStep(prev => Math.max(prev - 1, 1));
    };

    const handleStartOver = () => {
        setFormData({
            methods: [],
            ownerSalary: '',
            averageSalary: '',
            employeeBenefits: '',
            staffNumber: '',
            expenses: '',
            debt: '',
            scalability: '5',
            growthRate: '',
            yearsOperating: '',
            ltv: '',
            cac: '',
            churnRate: '',
            customerGrowthRate: '',
            industry: '',
            marketTrendImpact: '5',
            competitivePositioning: '5',
            marketVolatility: '5',
            aiReplaceable: '',
            aiReplaceCount: '',
            hasIP: '',
            ipValue: '',
            ipUnique: '',
            operationalEfficiency: '5',
            projectedRevenue: '',
            expectedGrowthRate: '',
            cashFlow1: '',
            cashFlow2: '',
            cashFlow3: '',
            cashFlow4: '',
            cashFlow5: '',
            discountRate: '',
            terminalGrowthRate: '',
            assets: ''
        });
        setCurrentStep(1);
        setValuationResult(null);
        setErrors({});
        localStorage.removeItem('valuationFormData');
        if (valuationChartRef.current) valuationChartRef.current.destroy();
        if (staffChartRef.current) staffChartRef.current.destroy();
        if (incomeChartRef.current) incomeChartRef.current.destroy();
        if (dcfChartRef.current) dcfChartRef.current.destroy();
    };

    // Show/hide conditional fields
    const checkConditionalFields = () => {
        const aiReplaceCountSection = document.getElementById('aiReplaceCountSection');
        const ipValueSection = document.getElementById('ipValueSection');
        const ipUniqueSection = document.getElementById('ipUniqueSection');
        const dcfFields = document.getElementById('dcfFields');
        const earningsFields = document.getElementById('earningsFields');

        if (aiReplaceCountSection) {
            aiReplaceCountSection.classList.toggle('hidden', formData.aiReplaceable !== 'yes');
        }
        if (ipValueSection && ipUniqueSection) {
            const showIP = formData.hasIP === 'yes';
            ipValueSection.classList.toggle('hidden', !showIP);
            ipUniqueSection.classList.toggle('hidden', !showIP);
        }
        if (dcfFields) {
            dcfFields.classList.toggle('hidden', !formData.methods.includes('dcf'));
        }
        if (earningsFields) {
            earningsFields.classList.toggle('hidden', !formData.methods.includes('earnings'));
        }
    };

    // Valuation calculation logic
    const calculateValuation = () => {
        if (!validateStep(6)) return;

        setIsCalculating(true);
        setTimeout(() => {
            const valuations = [];
            const valuationDetails = [];

            const ownerSalary = parseFloat(formData.ownerSalary.replace(/,/g, '')) || 0;
            const averageSalary = parseFloat(formData.averageSalary.replace(/,/g, '')) || 0;
            const employeeBenefits = parseFloat(formData.employeeBenefits.replace(/,/g, '')) || 0;
            const staffNumber = parseInt(formData.staffNumber) || 0;
            const expenses = parseFloat(formData.expenses.replace(/,/g, '')) || 0;
            const debt = parseFloat(formData.debt.replace(/,/g, '')) || 0;
            const scalability = parseInt(formData.scalability) || 5;
            const growthRate = parseFloat(formData.growthRate) || 0;
            const yearsOperating = parseInt(formData.yearsOperating) || 0;
            const ltv = parseFloat(formData.ltv.replace(/,/g, '')) || 0;
            const cac = parseFloat(formData.cac.replace(/,/g, '')) || 0;
            const churnRate = parseFloat(formData.churnRate) || 0;
            const customerGrowthRate = parseFloat(formData.customerGrowthRate) || 0;
            const marketTrendImpact = parseInt(formData.marketTrendImpact) || 5;
            const competitivePositioning = parseInt(formData.competitivePositioning) || 5;
            const marketVolatility = parseInt(formData.marketVolatility) || 5;
            const aiReplaceCount = formData.aiReplaceable === 'yes' ? parseInt(formData.aiReplaceCount) || 0 : 0;
            const ipValue = formData.hasIP === 'yes' ? parseFloat(formData.ipValue.replace(/,/g, '')) || 0 : 0;
            const ipUnique = formData.hasIP === 'yes' ? formData.ipUnique : '';
            const operationalEfficiency = parseInt(formData.operationalEfficiency) || 5;
            const projectedRevenue = parseFloat(formData.projectedRevenue.replace(/,/g, '')) || 0;
            const expectedGrowthRate = parseFloat(formData.expectedGrowthRate) || 0;

            // Multiplier Method
            if (formData.methods.includes('multiplier')) {
                const industryMultipliers = {
                    'Technology': 5,
                    'Retail': 2,
                    'Hospitality': 1.5,
                    'Media': 3,
                    'Marketing': 2.5,
                    'Construction': 1.2,
                    'Healthcare': 4,
                    'Finance': 3.5,
                    'Real Estate': 2,
                    'Education': 2.5,
                    'Transportation': 1.8,
                    'Agriculture': 1.5,
                    'Manufacturing': 2,
                    'Legal': 3,
                    'Energy': 2.5,
                    'Arts & Entertainment': 2,
                    'Other': 2
                };
                const multiplier = industryMultipliers[formData.industry] || 2;
                let baseValue = projectedRevenue * multiplier;

                baseValue *= (1 + (growthRate / 100));
                baseValue *= (1 + (scalability - 5) * 0.05);
                baseValue *= (1 + (competitivePositioning - 5) * 0.03);
                baseValue *= (1 - (churnRate / 100) * 0.5);
                baseValue -= debt;

                if (formData.hasIP === 'yes') {
                    baseValue += ipValue * (ipUnique === 'unique' ? 1.2 : 0.8);
                }

                const minValue = baseValue * 0.9;
                const maxValue = baseValue * 1.1;

                valuations.push({
                    method: 'Multiplier Method',
                    min: minValue,
                    max: maxValue,
                    avg: baseValue
                });

                valuationDetails.push(`Multiplier Method: Used an industry multiplier of ${multiplier}x for ${formData.industry}. Adjusted for growth rate (${growthRate}%), scalability (${scalability}), competitive positioning (${competitivePositioning}), churn rate (${churnRate}%), and IP value ($${ipValue.toLocaleString()}).`);
            }

            // Income-Based Valuation
            if (formData.methods.includes('income')) {
                let baseValue = projectedRevenue * 3;

                baseValue *= (1 + (expectedGrowthRate / 100));
                baseValue *= (1 + (marketTrendImpact - 5) * 0.04);
                baseValue *= (1 - (marketVolatility - 5) * 0.03);
                baseValue -= debt;

                const ltvCacRatio = ltv / (cac || 1);
                baseValue *= (ltvCacRatio > 3 ? 1.1 : ltvCacRatio < 1 ? 0.9 : 1);

                const minValue = baseValue * 0.9;
                const maxValue = baseValue * 1.1;

                valuations.push({
                    method: 'Income-Based Valuation',
                    min: minValue,
                    max: maxValue,
                    avg: baseValue
                });

                valuationDetails.push(`Income-Based Valuation: Based on projected revenue ($${projectedRevenue.toLocaleString()}) with a 3x multiplier. Adjusted for expected growth (${expectedGrowthRate}%), market trends (${marketTrendImpact}), market volatility (${marketVolatility}), and LTV/CAC ratio (${ltvCacRatio.toFixed(2)}).`);
            }

            // Earnings-Based Valuation
            if (formData.methods.includes('earnings')) {
                const assets = parseFloat(formData.assets.replace(/,/g, '')) || 0;
                const netEarnings = projectedRevenue - expenses - (averageSalary * staffNumber) - employeeBenefits - ownerSalary;
                let baseValue = (netEarnings * 4) + assets;

                baseValue *= (1 + (operationalEfficiency - 5) * 0.05);
                baseValue *= (1 + (yearsOperating / 10));
                baseValue -= debt;

                if (formData.aiReplaceable === 'yes') {
                    const savings = aiReplaceCount * averageSalary * 0.5;
                    baseValue += savings;
                }

                const minValue = baseValue * 0.9;
                const maxValue = baseValue * 1.1;

                valuations.push({
                    method: 'Earnings-Based Valuation',
                    min: minValue,
                    max: maxValue,
                    avg: baseValue
                });

                valuationDetails.push(`Earnings-Based Valuation: Calculated from net earnings ($${netEarnings.toLocaleString()}) with a 4x multiplier plus assets ($${assets.toLocaleString()}). Adjusted for operational efficiency (${operationalEfficiency}), years operating (${yearsOperating}), and AI replaceability savings ($${((aiReplaceCount * averageSalary * 0.5) || 0).toLocaleString()}).`);
            }

            // Discounted Cash Flow (DCF)
            if (formData.methods.includes('dcf')) {
                const cashFlows = [
                    parseFloat(formData.cashFlow1.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow2.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow3.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow4.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow5.replace(/,/g, '')) || 0
                ];
                const discountRate = (parseFloat(formData.discountRate) || 10) / 100;
                const terminalGrowthRate = (parseFloat(formData.terminalGrowthRate) || 3) / 100;

                let dcfValue = 0;
                for (let i = 0; i < cashFlows.length; i++) {
                    dcfValue += cashFlows[i] / Math.pow(1 + discountRate, i + 1);
                }

                const terminalValue = (cashFlows[4] * (1 + terminalGrowthRate)) / (discountRate - terminalGrowthRate);
                dcfValue += terminalValue / Math.pow(1 + discountRate, 5);

                dcfValue -= debt;

                const minValue = dcfValue * 0.9;
                const maxValue = dcfValue * 1.1;

                valuations.push({
                    method: 'Discounted Cash Flow (DCF)',
                    min: minValue,
                    max: maxValue,
                    avg: dcfValue
                });

                valuationDetails.push(`Discounted Cash Flow (DCF): Sum of discounted cash flows over 5 years (Year 1: $${cashFlows[0].toLocaleString()}, Year 5: $${cashFlows[4].toLocaleString()}) with a discount rate of ${(discountRate * 100).toFixed(2)}% and terminal growth rate of ${(terminalGrowthRate * 100).toFixed(2)}%. Terminal value: $${terminalValue.toLocaleString()}.`);
            }

            const avgValuation = valuations.reduce((sum, v) => sum + v.avg, 0) / valuations.length;
            const minValuation = valuations.reduce((min, v) => Math.min(min, v.min), valuations[0].min);
            const maxValuation = valuations.reduce((max, v) => Math.max(max, v.max), valuations[0].max);

            setValuationResult({
                valuations,
                valuationDetails,
                avgValuation,
                minValuation,
                maxValuation,
                financialMetrics: {
                    projectedRevenue,
                    netEarnings: projectedRevenue - expenses - (averageSalary * staffNumber) - employeeBenefits - ownerSalary,
                    ltvCacRatio: ltv / (cac || 1),
                    churnRate,
                    growthRate
                },
                staffData: {
                    ownerSalary,
                    staffSalaries: averageSalary * staffNumber,
                    employeeBenefits
                },
                revenueData: {
                    currentRevenue: projectedRevenue / (1 + (expectedGrowthRate / 100)),
                    projectedRevenue
                },
                cashFlows: formData.methods.includes('dcf') ? [
                    parseFloat(formData.cashFlow1.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow2.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow3.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow4.replace(/,/g, '')) || 0,
                    parseFloat(formData.cashFlow5.replace(/,/g, '')) || 0
                ] : []
            });

            setIsCalculating(false);
            setCurrentStep(totalSteps); // Move to summary step
        }, 1000); // Simulate async calculation
    };

    // Export results as PDF
    const exportResults = () => {
        if (!valuationResult) return;

        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(20);
        doc.text('Business Valuation Report', 20, 20);
        doc.setFontSize(12);
        doc.text('Generated by Amanda Valuation', 20, 30);
        doc.setLineWidth(0.5);
        doc.line(20, 35, 190, 35);

        let y = 45;
        doc.setFontSize(16);
        doc.text('Valuation Summary', 20, y);
        y += 10;

        doc.setFontSize(12);
        doc.text(`Estimated Valuation: $${Math.round(valuationResult.avgValuation).toLocaleString()}`, 20, y);
        y += 10;

        doc.text('Valuation Ranges by Method:', 20, y);
        y += 10;
        valuationResult.valuations.forEach(v => {
            doc.text(`${v.method}: $${Math.round(v.min).toLocaleString()} - $${Math.round(v.max).toLocaleString()}`, 25, y);
            y += 7;
        });

        y += 5;
        doc.text('Key Financial Metrics:', 20, y);
        y += 10;
        const metrics = [
            `Projected Revenue: $${valuationResult.financialMetrics.projectedRevenue.toLocaleString()}`,
            `Net Earnings: $${valuationResult.financialMetrics.netEarnings.toLocaleString()}`,
            `LTV/CAC Ratio: ${valuationResult.financialMetrics.ltvCacRatio.toFixed(2)}`,
            `Churn Rate: ${valuationResult.financialMetrics.churnRate}%`,
            `Growth Rate: ${valuationResult.financialMetrics.growthRate}%`
        ];
        metrics.forEach(metric => {
            doc.text(metric, 25, y);
            y += 7;
        });

        y += 5;
        doc.text('Valuation Factors:', 20, y);
        y += 10;
        valuationResult.valuationDetails.forEach(detail => {
            const lines = doc.splitTextToSize(detail, 160);
            lines.forEach(line => {
                doc.text(line, 25, y);
                y += 7;
            });
        });

        // Add charts as images
        const addChartImage = (canvas, title, x, y, width, height) => {
            if (canvas) {
                const imgData = canvas.toDataURL('image/png');
                doc.text(title, x, y);
                doc.addImage(imgData, 'PNG', x, y + 5, width, height);
                return y + height + 15;
            }
            return y;
        };

        y += 10;
        doc.setFontSize(16);
        doc.text('Valuation Charts', 20, y);
        y += 10;

        if (valuationChartRef.current) {
            y = addChartImage(valuationChartRef.current.canvas, 'Valuation Comparison', 20, y, 160, 80);
        }
        if (staffChartRef.current) {
            y = addChartImage(staffChartRef.current.canvas, 'Staff Comparison', 20, y, 160, 80);
        }
        if (incomeChartRef.current) {
            y = addChartImage(incomeChartRef.current.canvas, 'Revenue Comparison', 20, y, 160, 80);
        }
        if (dcfChartRef.current) {
            y = addChartImage(dcfChartRef.current.canvas, 'DCF Valuation Analysis', 20, y, 160, 80);
        }

        doc.save('Amanda_Valuation_Report.pdf');
    };

    // Save progress as JSON
    const saveProgress = () => {
        const blob = new Blob([JSON.stringify(formData)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'valuation_progress.json';
        a.click();
        URL.revokeObjectURL(url);
    };

    // Render charts when results are available
    React.useEffect(() => {
        if (valuationResult) {
            const chartsSection = document.getElementById('chartsSection');
            if (chartsSection) {
                chartsSection.classList.remove('hidden');
            }

            // Valuation Comparison Chart
            if (valuationChartRef.current) {
                valuationChartRef.current.destroy();
            }
            valuationChartRef.current = new Chart(document.getElementById('valuationChart'), {
                type: 'bar',
                data: {
                    labels: valuationResult.valuations.map(v => v.method),
                    datasets: [{
                        label: 'Valuation Range',
                        data: valuationResult.valuations.map(v => v.avg),
                        backgroundColor: 'rgba(56, 178, 172, 0.6)',
                        borderColor: 'rgba(56, 178, 172, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Valuation ($)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Staff Comparison Chart
            if (staffChartRef.current) {
                staffChartRef.current.destroy();
            }
            staffChartRef.current = new Chart(document.getElementById('staffChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Owner Salary', 'Staff Salaries', 'Benefits'],
                    datasets: [{
                        data: [
                            valuationResult.staffData.ownerSalary,
                            valuationResult.staffData.staffSalaries,
                            valuationResult.staffData.employeeBenefits
                        ],
                        backgroundColor: [
                            'rgba(56, 178, 172, 0.6)',
                            'rgba(45, 55, 72, 0.6)',
                            'rgba(246, 173, 85, 0.6)'
                        ],
                        borderColor: [
                            'rgba(56, 178, 172, 1)',
                            'rgba(45, 55, 72, 1)',
                            'rgba(246, 173, 85, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Income Comparison Chart
            if (incomeChartRef.current) {
                incomeChartRef.current.destroy();
            }
            incomeChartRef.current = new Chart(document.getElementById('incomeChart'), {
                type: 'line',
                data: {
                    labels: ['Current Revenue', 'Projected Revenue'],
                    datasets: [{
                        label: 'Revenue',
                        data: [
                            valuationResult.revenueData.currentRevenue,
                            valuationResult.revenueData.projectedRevenue
                        ],
                        fill: false,
                        borderColor: 'rgba(56, 178, 172, 1)',
                        tension: 0.1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Revenue ($)'
                            }
                        }
                    }
                }
            });

            // DCF Chart
            if (formData.methods.includes('dcf')) {
                if (dcfChartRef.current) {
                    dcfChartRef.current.destroy();
                }
                dcfChartRef.current = new Chart(document.getElementById('dcfChart'), {
                    type: 'line',
                    data: {
                        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
                        datasets: [{
                            label: 'Cash Flows',
                            data: valuationResult.cashFlows,
                            fill: false,
                            borderColor: 'rgba(56, 178, 172, 1)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cash Flow ($)'
                                }
                            }
                        }
                    }
                });
                const dcfChartContainer = document.getElementById('dcfChartContainer');
                if (dcfChartContainer) {
                    dcfChartContainer.classList.remove('hidden');
                }
            }

            // Show result section
            const valuationResultSection = document.getElementById('valuationResult');
            if (valuationResultSection) {
                valuationResultSection.classList.remove('hidden');
            }
        }

        return () => {
            if (valuationChartRef.current) valuationChartRef.current.destroy();
            if (staffChartRef.current) staffChartRef.current.destroy();
            if (incomeChartRef.current) incomeChartRef.current.destroy();
            if (dcfChartRef.current) dcfChartRef.current.destroy();
        };
    }, [valuationResult]);

    // Render the form steps
    const renderStep = () => {
        switch (currentStep) {
            case 1:
                return (
                    <div id="step-1" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-calculator mr-2 text-teal-500"></i> Valuation Method Selection
                        </h2>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">Select Valuation Methods (Choose up to 3):</label>
                            <div className="space-y-2">
                                {['multiplier', 'income', 'earnings', 'dcf'].map(method => (
                                    <div key={method} className="flex items-center">
                                        <input
                                            type="checkbox"
                                            id={`method-${method}`}
                                            name={method}
                                            value={method}
                                            checked={formData.methods.includes(method)}
                                            onChange={handleInputChange}
                                            className="mr-2 input-highlight"
                                            aria-describedby={`method-${method}-desc`}
                                        />
                                        <label htmlFor={`method-${method}`} className="text-sm text-gray-700">
                                            {method === 'multiplier' && 'Multiplier Method - Based on industry multipliers.'}
                                            {method === 'income' && 'Income-Based Valuation - Focuses on total revenue.'}
                                            {method === 'earnings' && 'Earnings-Based Valuation - Focuses on net profit.'}
                                            {method === 'dcf' && 'Discounted Cash Flow (DCF) - Based on future cash flows.'}
                                        </label>
                                    </div>
                                ))}
                            </div>
                            {errors.methods && <p className="error-message">{errors.methods}</p>}
                            <p className="mt-1 text-sm text-gray-500">Select methods to compare multiple valuation approaches.</p>
                        </div>
                        <div className="flex justify-end">
                            <button onClick={handleNext} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                                Next <i className="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                );
            case 2:
                return (
                    <div id="step-2" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-list-alt mr-2 text-teal-500"></i> Business Fundamentals
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {[
                                { id: 'ownerSalary', label: 'Owner Salary ($)', placeholder: '80,000.00', desc: 'Enter your annual salary as the owner.', prefix: '$' },
                                { id: 'averageSalary', label: 'Average Staff Salary ($)', placeholder: '50,000.00', desc: 'Average annual salary of your staff members.', prefix: '$' },
                                { id: 'employeeBenefits', label: 'Employee Benefits & Equity ($)', placeholder: '10,000.00', desc: 'Include costs like stock options or bonuses.', prefix: '$' },
                                { id: 'staffNumber', label: 'Number of Staff', placeholder: '10', type: 'number', desc: 'Total number of staff employed.' },
                                { id: 'expenses', label: 'Annual Operating Expenses ($)', placeholder: '50,000.00', desc: 'Exclude salaries, benefits, and debt repayments.', prefix: '$' },
                                { id: 'debt', label: 'Total Debt ($)', placeholder: '20,000.00', desc: 'Total outstanding debts or liabilities.', prefix: '$' },
                                { id: 'growthRate', label: 'Growth Rate (%)', placeholder: '5.00', desc: 'Average annual revenue growth rate.', suffix: '%' },
                                { id: 'yearsOperating', label: 'Years Operating', placeholder: '5', type: 'number', desc: 'Number of years your business has been operating.' }
                            ].map(field => (
                                <div key={field.id}>
                                    <label htmlFor={field.id} className="block text-sm font-medium text-gray-700 mb-1">{field.label}</label>
                                    <div className="relative rounded-md shadow-sm">
                                        {field.prefix && (
                                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">{field.prefix}</span>
                                            </div>
                                        )}
                                        <input
                                            type={field.type || 'text'}
                                            id={field.id}
                                            name={field.id}
                                            placeholder={field.placeholder}
                                            value={formData[field.id]}
                                            onChange={handleInputChange}
                                            className={`input-highlight block w-full ${field.prefix ? 'pl-7' : ''} ${field.suffix ? 'pr-12' : ''} sm:text-sm border-gray-300 rounded-md`}
                                            aria-describedby={`${field.id}-desc`}
                                            required={['ownerSalary', 'averageSalary', 'staffNumber', 'expenses', 'debt', 'growthRate', 'yearsOperating'].includes(field.id)}
                                        />
                                        {field.suffix && (
                                            <div className="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">{field.suffix}</span>
                                            </div>
                                        )}
                                    </div>
                                    {errors[field.id] && <p className="error-message">{errors[field.id]}</p>}
                                    <p id={`${field.id}-desc`} className="mt-1 text-sm text-gray-500">{field.desc}</p>
                                </div>
                            ))}
                            <div>
                                <label htmlFor="scalability" className="block text-sm font-medium text-gray-700 mb-1">Scalability (1-10):</label>
                                <div className="flex items-center">
                                    <input
                                        type="range"
                                        id="scalability"
                                        name="scalability"
                                        min="1"
                                        max="10"
                                        value={formData.scalability}
                                        onChange={handleInputChange}
                                        className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                        aria-describedby="scalability-desc"
                                    />
                                    <span id="scalabilityValue" className="ml-3 text-sm font-medium text-gray-700">{formData.scalability}</span>
                                </div>
                                <p id="scalability-desc" className="mt-1 text-sm text-gray-500">Rate how easily your business can scale (1 = Not scalable, 10 = Highly scalable).</p>
                            </div>
                        </div>
                        <div className="flex justify-between mt-6">
                            <button onClick={handlePrev} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                                <i className="fas fa-arrow-left mr-2"></i> Previous
                            </button>
                            <button onClick={handleNext} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                                Next <i className="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                );
            case 3:
                return (
                    <div id="step-3" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-users mr-2 text-teal-500"></i> Customer Metrics
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {[
                                { id: 'ltv', label: 'Customer Lifetime Value (LTV) ($)', placeholder: '1,000.00', desc: 'Average revenue per customer over their lifetime.', prefix: '$' },
                                { id: 'cac', label: 'Customer Acquisition Cost (CAC) ($)', placeholder: '200.00', desc: 'Average cost to acquire a new customer.', prefix: '$' },
                                { id: 'churnRate', label: 'Churn Rate (%)', placeholder: '5.00', desc: 'Percentage of customers lost annually.', suffix: '%' },
                                { id: 'customerGrowthRate', label: 'Customer Growth Rate (%)', placeholder: '10.00', desc: 'Annual growth rate of your customer base.', suffix: '%' }
                            ].map(field => (
                                <div key={field.id}>
                                    <label htmlFor={field.id} className="block text-sm font-medium text-gray-700 mb-1">{field.label}</label>
                                    <div className="relative rounded-md shadow-sm">
                                        {field.prefix && (
                                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">{field.prefix}</span>
                                            </div>
                                        )}
                                        <input
                                            type="text"
                                            id={field.id}
                                            name={field.id}
                                            placeholder={field.placeholder}
                                            value={formData[field.id]}
                                            onChange={handleInputChange}
                                            className={`input-highlight block w-full ${field.prefix ? 'pl-7' : ''} ${field.suffix ? 'pr-12' : ''} sm:text-sm border-gray-300 rounded-md`}
                                            aria-describedby={`${field.id}-desc`}
                                            required
                                        />
                                        {field.suffix && (
                                            <div className="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">{field.suffix}</span>
                                            </div>
                                        )}
                                    </div>
                                    {errors[field.id] && <p className="error-message">{errors[field.id]}</p>}
                                    <p id={`${field.id}-desc`} className="mt-1 text-sm text-gray-500">{field.desc}</p>
                                </div>
                            ))}
                        </div>
                        <div className="flex justify-between mt-6">
                            <button onClick={handlePrev} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                                <i className="fas fa-arrow-left mr-2"></i> Previous
                            </button>
                            <button onClick={handleNext} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                                Next <i className="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                );
            case 4:
                return (
                    <div id="step-4" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-industry mr-2 text-teal-500"></i> Market and Industry Factors
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label htmlFor="industry" className="block text-sm font-medium text-gray-700 mb-1">Select Industry:</label>
                                <select
                                    id="industry"
                                    name="industry"
                                    value={formData.industry}
                                    onChange={handleInputChange}
                                    className="input-highlight block w-full pl-3 pr-10 py-2 text-base border-gray-300 rounded-md"
                                    aria-describedby="industry-desc"
                                    required
                                >
                                    <option value="">--Select Industry--</option>
                                    {['Technology', 'Retail', 'Hospitality', 'Media', 'Marketing', 'Construction', 'Healthcare', 'Finance', 'Real Estate', 'Education', 'Transportation', 'Agriculture', 'Manufacturing', 'Legal', 'Energy', 'Arts & Entertainment', 'Other'].map(ind => (
                                        <option key={ind} value={ind}>{ind}</option>
                                    ))}
                                </select>
                                {errors.industry && <p className="error-message">{errors.industry}</p>}
                                <p id="industry-desc" className="mt-1 text-sm text-gray-500">Choose your industry for accurate valuation.</p>
                            </div>
                            {[
                                { id: 'marketTrendImpact', label: 'Market Trend Impact (1-10)', desc: 'Rate the impact of market trends on your business (1 = Negative, 10 = Positive).' },
                                { id: 'competitivePositioning', label: 'Competitive Positioning (1-10)', desc: 'Rate your market position against competitors (1 = Weak, 10 = Dominant).' },
                                { id: 'marketVolatility', label: 'Market Volatility (1-10)', desc: 'Rate market stability (1 = Highly Volatile, 10 = Very Stable).' }
                            ].map(field => (
                                <div key={field.id}>
                                    <label htmlFor={field.id} className="block text-sm font-medium text-gray-700 mb-1">{field.label}</label>
                                    <div className="flex items-center">
                                        <input
                                            type="range"
                                            id={field.id}
                                            name={field.id}
                                            min="1"
                                            max="10"
                                            value={formData[field.id]}
                                            onChange={handleInputChange}
                                            className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                            aria-describedby={`${field.id}-desc`}
                                        />
                                        <span id={`${field.id}Value`} className="ml-3 text-sm font-medium text-gray-700">{formData[field.id]}</span>
                                    </div>
                                    <p id={`${field.id}-desc`} className="mt-1 text-sm text-gray-500">{field.desc}</p>
                                </div>
                            ))}
                        </div>
                        <div className="flex justify-between mt-6">
                            <button onClick={handlePrev} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                                <i className="fas fa-arrow-left mr-2"></i> Previous
                            </button>
                            <button onClick={handleNext} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                                Next <i className="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                );
            case 5:
                return (
                    <div id="step-5" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-cogs mr-2 text-teal-500"></i> Advanced Inputs
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label htmlFor="aiReplaceable" className="block text-sm font-medium text-gray-700 mb-1">Can Staff be Replaced by AI?</label>
                                <select
                                    id="aiReplaceable"
                                    name="aiReplaceable"
                                    value={formData.aiReplaceable}
                                    onChange={handleInputChange}
                                    className="input-highlight block w-full pl-3 pr-10 py-2 text-base border-gray-300 rounded-md"
                                    aria-describedby="aiReplaceable-desc"
                                    required
                                >
                                    <option value="">--Select--</option>
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                                {errors.aiReplaceable && <p className="error-message">{errors.aiReplaceable}</p>}
                                <p id="aiReplaceable-desc" className="mt-1 text-sm text-gray-500">Select 'Yes' if some roles can be automated.</p>
                            </div>
                            <div id="aiReplaceCountSection" className={formData.aiReplaceable === 'yes' ? '' : 'hidden'}>
                                <label htmlFor="aiReplaceCount" className="block text-sm font-medium text-gray-700 mb-1">Number of Staff Replaceable by AI:</label>
                                <input
                                    type="number"
                                    id="aiReplaceCount"
                                    name="aiReplaceCount"
                                    placeholder="2"
                                    value={formData.aiReplaceCount}
                                    onChange={handleInputChange}
                                    className="input-highlight block w-full sm:text-sm border-gray-300 rounded-md"
                                    aria-describedby="aiReplaceCount-desc"
                                />
                                {errors.aiReplaceCount && <p className="error-message">{errors.aiReplaceCount}</p>}
                                <p id="aiReplaceCount-desc" className="mt-1 text-sm text-gray-500">Number of positions that could be automated.</p>
                            </div>
                            <div>
                                <label htmlFor="hasIP" className="block text-sm font-medium text-gray-700 mb-1">Do You Have Intellectual Property (IP)?</label>
                                <select
                                    id="hasIP"
                                    name="hasIP"
                                    value={formData.hasIP}
                                    onChange={handleInputChange}
                                    className="input-highlight block w-full pl-3 pr-10 py-2 text-base border-gray-300 rounded-md"
                                    aria-describedby="hasIP-desc"
                                    required
                                >
                                    <option value="">--Select--</option>
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                                {errors.hasIP && <p className="error-message">{errors.hasIP}</p>}
                                <p id="hasIP-desc" className="mt-1 text-sm text-gray-500">Select 'Yes' if you own patents or trademarks.</p>
                            </div>
                            <div id="ipValueSection" className={formData.hasIP === 'yes' ? '' : 'hidden'}>
                                <label htmlFor="ipValue" className="block text-sm font-medium text-gray-700 mb-1">IP Value ($):</label>
                                <div className="relative rounded-md shadow-sm">
                                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <span className="text-gray-500 sm:text-sm">$</span>
                                    </div>
                                    <input
                                        type="text"
                                        id="ipValue"
                                        name="ipValue"
                                        placeholder="50,000.00"
                                        value={formData.ipValue}
                                        onChange={handleInputChange}
                                        className="input-highlight block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md"
                                        aria-describedby="ipValue-desc"
                                    />
                                </div>
                                {errors.ipValue && <p className="error-message">{errors.ipValue}</p>}
                                <p id="ipValue-desc" className="mt-1 text-sm text-gray-500">Realistic valuation of your IP assets.</p>
                            </div>
                            <div id="ipUniqueSection" className={formData.hasIP === 'yes' ? '' : 'hidden'}>
                                <label htmlFor="ipUnique" className="block text-sm font-medium text-gray-700 mb-1">Is the IP Unique?</label>
                                <select
                                    id="ipUnique"
                                    name="ipUnique"
                                    value={formData.ipUnique}
                                    onChange={handleInputChange}
                                    className="input-highlight block w-full pl-3 pr-10 py-2 text-base border-gray-300 rounded-md"
                                    aria-describedby="ipUnique-desc"
                                >
                                    <option value="">--Select--</option>
                                    <option value="unique">Completely Unique</option>
                                    <option value="variation">Variation of Another Idea</option>
                                </select>
                                {errors.ipUnique && <p className="error-message">{errors.ipUnique}</p>}
                                <p id="ipUnique-desc" className="mt-1 text-sm text-gray-500">Specify the uniqueness of your IP.</p>
                            </div>
                            <div>
                                <label htmlFor="operationalEfficiency" className="block text-sm font-medium text-gray-700 mb-1">Operational Efficiency (1-10):</label>
                                <div className="flex items-center">
                                    <input
                                        type="range"
                                        id="operationalEfficiency"
                                        name="operationalEfficiency"
                                        min="1"
                                        max="10"
                                        value={formData.operationalEfficiency}
                                        onChange={handleInputChange}
                                        className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                        aria-describedby="operationalEfficiency-desc"
                                    />
                                    <span id="operationalEfficiencyValue" className="ml-3 text-sm font-medium text-gray-700">{formData.operationalEfficiency}</span>
                                </div>
                                <p id="operationalEfficiency-desc" className="mt-1 text-sm text-gray-500">Rate your operational efficiency (1 = Inefficient, 10 = Highly Efficient).</p>
                            </div>
                        </div>
                        <div className="flex justify-between mt-6">
                            <button onClick={handlePrev} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                                <i className="fas fa-arrow-left mr-2"></i> Previous
                            </button>
                            <button onClick={handleNext} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                                Next <i className="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                );
            case 6:
                return (
                    <div id="step-6" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-chart-line mr-2 text-teal-500"></i> Future Projections
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {[
                                { id: 'projectedRevenue', label: 'Projected Revenue Next Year ($)', placeholder: '150,000.00', desc: 'Expected revenue for the next fiscal year.', prefix: '$' },
                                { id: 'expectedGrowthRate', label: 'Expected Annual Growth Rate (%)', placeholder: '10.00', desc: 'Anticipated revenue growth rate.', suffix: '%' }
                            ].map(field => (
                                <div key={field.id}>
                                    <label htmlFor={field.id} className="block text-sm font-medium text-gray-700 mb-1">{field.label}</label>
                                    <div className="relative rounded-md shadow-sm">
                                        {field.prefix && (
                                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">{field.prefix}</span>
                                            </div>
                                        )}
                                        <input
                                            type="text"
                                            id={field.id}
                                            name={field.id}
                                            placeholder={field.placeholder}
                                            value={formData[field.id]}
                                            onChange={handleInputChange}
                                            className={`input-highlight block w-full ${field.prefix ? 'pl-7' : ''} ${field.suffix ? 'pr-12' : ''} sm:text-sm border-gray-300 rounded-md`}
                                            aria-describedby={`${field.id}-desc`}
                                            required
                                        />
                                        {field.suffix && (
                                            <div className="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">{field.suffix}</span>
                                            </div>
                                        )}
                                    </div>
                                    {errors[field.id] && <p className="error-message">{errors[field.id]}</p>}
                                    <p id={`${field.id}-desc`} className="mt-1 text-sm text-gray-500">{field.desc}</p>
                                </div>
                            ))}
                            <div id="dcfFields" className={formData.methods.includes('dcf') ? '' : 'hidden'} className="col-span-2">
                                <h3 className="text-lg font-semibold text-gray-800 mb-4">Discounted Cash Flow (DCF) Inputs</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {[
                                        { id: 'cashFlow1', label: 'Year 1 Cash Flow ($)', placeholder: '50,000.00', prefix: '$' },
                                        { id: 'cashFlow2', label: 'Year 2 Cash Flow ($)', placeholder: '55,000.00', prefix: '$' },
                                        { id: 'cashFlow3', label: 'Year 3 Cash Flow ($)', placeholder: '60,000.00', prefix: '$' },
                                        { id: 'cashFlow4', label: 'Year 4 Cash Flow ($)', placeholder: '65,000.00', prefix: '$' },
                                        { id: 'cashFlow5', label: 'Year 5 Cash Flow ($)', placeholder: '70,000.00', prefix: '$' },
                                        { id: 'discountRate', label: 'Discount Rate (%)', placeholder: '10.00', suffix: '%' },
                                        { id: 'terminalGrowthRate', label: 'Terminal Growth Rate (%)', placeholder: '3.00', suffix: '%' }
                                    ].map(field => (
                                        <div key={field.id}>
                                            <label htmlFor={field.id} className="block text-sm font-medium text-gray-700 mb-1">{field.label}</label>
                                            <div className="relative rounded-md shadow-sm">
                                                {field.prefix && (
                                                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                        <span className="text-gray-500 sm:text-sm">{field.prefix}</span>
                                                    </div>
                                                )}
                                                <input
                                                    type="text"
                                                    id={field.id}
                                                    name={field.id}
                                                    placeholder={field.placeholder}
                                                    value={formData[field.id]}
                                                    onChange={handleInputChange}
                                                    className={`input-highlight block w-full ${field.prefix ? 'pl-7' : ''} ${field.suffix ? 'pr-12' : ''} sm:text-sm border-gray-300 rounded-md`}
                                                    aria-describedby={`${field.id}-desc`}
                                                />
                                                {field.suffix && (
                                                    <div className="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                                        <span className="text-gray-500 sm:text-sm">{field.suffix}</span>
                                                    </div>
                                                )}
                                            </div>
                                            {errors[field.id] && <p className="error-message">{errors[field.id]}</p>}
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div id="earningsFields" className={formData.methods.includes('earnings') ? '' : 'hidden'} className="col-span-2">
                                <h3 className="text-lg font-semibold text-gray-800 mb-4">Earnings-Based Valuation Inputs</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label htmlFor="assets" className="block text-sm font-medium text-gray-700 mb-1">Total Assets ($):</label>
                                        <div className="relative rounded-md shadow-sm">
                                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span className="text-gray-500 sm:text-sm">$</span>
                                            </div>
                                            <input
                                                type="text"
                                                id="assets"
                                                name="assets"
                                                placeholder="300,000.00"
                                                value={formData.assets}
                                                onChange={handleInputChange}
                                                className="input-highlight block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md"
                                                aria-describedby="assets-desc"
                                            />
                                        </div>
                                        {errors.assets && <p className="error-message">{errors.assets}</p>}
                                        <p id="assets-desc" className="mt-1 text-sm text-gray-500">Total value of all assets owned.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="flex justify-between mt-6">
                            <button onClick={handlePrev} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                                <i className="fas fa-arrow-left mr-2"></i> Previous
                            </button>
                            <button onClick={handleNext} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                                Next <i className="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                );
            case 7:
                return (
                    <div id="step-7" className="step step-visible">
                        <h2 className="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i className="fas fa-check-circle mr-2 text-teal-500"></i> Review Your Inputs
                        </h2>
                        <div className="bg-gray-50 p-6 rounded-lg">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Summary</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {Object.entries(formData).map(([key, value]) => {
                                    if (value && key !== 'methods' && !(key.includes('Value') && key !== 'ipValue')) {
                                        return (
                                            <div key={key} className="flex justify-between">
                                                <span className="text-sm font-medium text-gray-600">{key.replace(/([A-Z])/g, ' $1').trim()}:</span>
                                                <span className="text-sm text-gray-800">{Array.isArray(value) ? value.join(', ') : value}</span>
                                            </div>
                                        );
                                    }
                                    return null;
                                })}
                            </div>
                        </div>
                        <div className="flex justify-between mt-6">
                            <button onClick={handlePrev} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                                <i className="fas fa-arrow-left mr-2"></i> Previous
                            </button>
                            <button onClick={calculateValuation} className="btn-primary text-white font-bold py-2 px-6 rounded-lg flex items-center">
                                {isCalculating ? <span className="loading-spinner mr-2"></span> : <i className="fas fa-calculator mr-2"></i>}
                                Calculate Valuation
                            </button>
                        </div>
                    </div>
                );
            default:
                return null;
        }
    };

    // Render result section
    const renderResult = () => {
        if (!valuationResult) return null;

        return (
            <div className="mt-8 bg-white rounded-xl shadow-lg overflow-hidden" id="valuationResult">
                <div className="p-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">Business Valuation Results</h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div className="bg-teal-50 p-4 rounded-lg">
                            <h3 className="text-lg font-semibold text-teal-800 mb-2">Key Financial Metrics</h3>
                            <div id="financialMetrics" className="space-y-2">
                                <p><span className="font-medium">Projected Revenue:</span> ${valuationResult.financialMetrics.projectedRevenue.toLocaleString()}</p>
                                <p><span className="font-medium">Net Earnings:</span> ${valuationResult.financialMetrics.netEarnings.toLocaleString()}</p>
                                <p><span className="font-medium">LTV/CAC Ratio:</span> {valuationResult.financialMetrics.ltvCacRatio.toFixed(2)}</p>
                                <p><span className="font-medium">Churn Rate:</span> {valuationResult.financialMetrics.churnRate}%</p>
                                <p><span className="font-medium">Growth Rate:</span> {valuationResult.financialMetrics.growthRate}%</p>
                            </div>
                        </div>
                        <div className="bg-green-50 p-4 rounded-lg">
                            <h3 className="text-lg font-semibold text-green-800 mb-2">Valuation Ranges</h3>
                            <div id="valuationRanges" className="space-y-2">
                                {valuationResult.valuations.map(v => (
                                    <p key={v.method}><span className="font-medium">{v.method}:</span> ${Math.round(v.min).toLocaleString()} - ${Math.round(v.max).toLocaleString()}</p>
                                ))}
                            </div>
                        </div>
                    </div>
                    <div className="bg-yellow-50 p-4 rounded-lg mb-8">
                        <h3 className="text-lg font-semibold text-yellow-800 mb-2">Final Valuation</h3>
                        <div id="finalValuation" className="text-center">
                            <p className="text-3xl font-bold text-gray-800" id="valuationAmount" data-value={valuationResult.avgValuation}>
                                ${Math.round(valuationResult.avgValuation).toLocaleString()}
                            </p>
                            <p className="text-sm text-gray-600 mt-2">Based on selected methods</p>
                        </div>
                    </div>
                    <div className="bg-purple-50 p-4 rounded-lg">
                        <h3 className="text-lg font-semibold text-purple-800 mb-2">Valuation Factors</h3>
                        <div id="valuationFactors" className="space-y-2">
                            {valuationResult.valuationDetails.map((detail, index) => (
                                <p key={index}>{detail}</p>
                            ))}
                        </div>
                    </div>
                    <div className="flex justify-center mt-6 gap-4">
                        <button onClick={exportResults} className="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                            <i className="fas fa-file-export mr-2"></i> Export Results
                        </button>
                        <button onClick={saveProgress} className="btn-secondary font-bold py-2 px-6 rounded-lg">
                            <i className="fas fa-save mr-2"></i> Save Progress
                        </button>
                    </div>
                </div>
            </div>
        );
    };

    // Render charts section
    const renderCharts = () => {
        if (!valuationResult) return null;

        return (
            <div className="mt-8 bg-white rounded-xl shadow-lg overflow-hidden" id="chartsSection">
                <div className="p-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">Valuation Analysis Charts</h2>
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="bg-white p-4 rounded-lg border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Valuation Comparison</h3>
                            <div className="chart-container">
                                <canvas id="valuationChart"></canvas>
                            </div>
                        </div>
                        <div className="bg-white p-4 rounded-lg border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Staff Comparison</h3>
                            <div className="chart-container">
                                <canvas id="staffChart"></canvas>
                            </div>
                        </div>
                        <div className="bg-white p-4 rounded-lg border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Revenue Comparison</h3>
                            <div className="chart-container">
                                <canvas id="incomeChart"></canvas>
                            </div>
                        </div>
                        <div className={formData.methods.includes('dcf') ? '' : 'hidden'} id="dcfChartContainer">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">DCF Valuation Analysis</h3>
                            <div className="chart-container">
                                <canvas id="dcfChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    return (
        <section id="valuation" className="py-16 bg-gray-50">
            <div className="container mx-auto px-6">
                <div className="text-center mb-12">
                    <h2 className="text-3xl font-bold text-gray-800 mb-4">Get Your Business Valuation in 15 Minutes</h2>
                    <p className="text-lg text-gray-600 max-w-2xl mx-auto">Use our advanced valuation tool to assess your business worth with detailed insights and actionable recommendations.</p>
                </div>
                <div className="bg-white rounded-xl shadow-lg overflow-hidden max-w-6xl mx-auto">
                    <div className="p-6 border-b border-gray-200">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-xl font-semibold text-gray-800">Step {currentStep} of {totalSteps}</h3>
                            <button onClick={handleStartOver} className="text-teal-500 hover:text-teal-600 font-medium flex items-center">
                                <i className="fas fa-redo-alt mr-2"></i> Start Over
                            </button>
                        </div>
                        <div className="progress-bar">
                            <div id="progress-fill" className="progress-fill" style={{ width: `${(currentStep / totalSteps) * 100}%` }}></div>
                        </div>
                    </div>
                    <div id="valuation-form" className="p-6">
                        {renderStep()}
                    </div>
                    {renderResult()}
                    {renderCharts()}
                </div>
            </div>
        </section>
    );
};

// Render the component
ReactDOM.render(<ValuationForm />, document.getElementById('valuation'));

    <!-- Tech Due Diligence -->
    <section id="tech-due-diligence" class="py-16 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Know Your Tech Risk Score Before Investors Do</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Our automated due diligence identifies technical risks that could impact your valuation or deal terms.</p>
            </div>
            <div class="bg-gray-50 rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto">
                <div class="md:flex">
                    <div class="md:w-1/2 p-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">Tech Risk Assessment</h3>
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-600">Code Quality</span>
                                    <span class="text-sm font-medium text-gray-600">72/100</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 72%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Static analysis of your codebase quality and maintainability</p>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-600">Infrastructure</span>
                                    <span class="text-sm font-medium text-gray-600">85/100</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Evaluation of your cloud architecture and scalability</p>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-600">Security</span>
                                    <span class="text-sm font-medium text-gray-600">64/100</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 64%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Vulnerability scanning and security best practices</p>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-600">Team</span>
                                    <span class="text-sm font-medium text-gray-600">78/100</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 78%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Assessment of your engineering team structure and skills</p>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-600">Processes</span>
                                    <span class="text-sm font-medium text-gray-600">55/100</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 55%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Review of your development and deployment workflows</p>
                            </div>
                        </div>
                        <div class="mt-8 bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="text-sm text-gray-500">Your Overall Tech Risk Score</div>
                                    <div class="text-2xl font-bold">72/100</div>
                                    <div class="text-sm font-medium text-teal-500">Moderate Risk</div>
                                </div>
                                <div class="bg-teal-100 p-3 rounded-full">
                                    <i class="fas fa-shield-alt text-teal-500 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="md:w-1/2 bg-white p-8 border-t md:border-t-0 md:border-l border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Key Findings</h3>
                        <div class="space-y-4 mb-6">
                            <div class="flex items-start">
                                <div class="bg-green-100 p-1 rounded-full mr-3 mt-1">
                                    <i class="fas fa-check text-green-500 text-xs"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800">Strong Infrastructure</h4>
                                    <p class="text-sm text-gray-600 mt-1">Your cloud architecture is well-designed for scalability with proper redundancy.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-yellow-100 p-1 rounded-full mr-3 mt-1">
                                    <i class="fas fa-exclamation text-yellow-500 text-xs"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800">Code Documentation</h4>
                                    <p class="text-sm text-gray-600 mt-1">Only 42% of your codebase has adequate documentation which could slow onboarding.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-red-100 p-1 rounded-full mr-3 mt-1">
                                    <i class="fas fa-times text-red-500 text-xs"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800">Security Vulnerabilities</h4>
                                    <p class="text-sm text-gray-600 mt-1">We detected 3 high-severity vulnerabilities that should be patched immediately.</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2">Recommended Actions</h4>
                            <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                                <li>Implement automated security scanning in your CI/CD pipeline</li>
                                <li>Document all major components and APIs</li>
                                <li>Create a knowledge transfer plan for key personnel</li>
                            </ul>
                        </div>
                        <div class="mt-6">
                            <button class="w-full btn-primary text-white font-bold py-3 px-6 rounded-lg">
                                <i class="fas fa-file-alt mr-2"></i> Get Full Due Diligence Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Data Room -->
    <section id="data-room" class="py-16 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">AI-Enabled Data Room</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Transform your valuation into an investor-ready data room with AI-powered organization and insights.</p>
            </div>
            <div class="max-w-5xl mx-auto">
                <div class="flex flex-col md:flex-row items-center justify-between mb-12">
                    <div class="md:w-1/3 mb-8 md:mb-0">
                        <div class="bg-white p-6 rounded-xl shadow-md h-full">
                            <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                                <i class="fas fa-calculator text-teal-500 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">1. Self-Valuation</h3>
                            <p class="text-gray-600">Complete our 15-minute assessment to get your estimated valuation range.</p>
                        </div>
                    </div>
                    <div class="hidden md:block">
                        <i class="fas fa-arrow-right text-gray-400 text-2xl mx-4"></i>
                    </div>
                    <div class="md:hidden">
                        <i class="fas fa-arrow-down text-gray-400 text-2xl my-4"></i>
                    </div>
                    <div class="md:w-1/3 mb-8 md:mb-0">
                        <div class="bg-white p-6 rounded-xl shadow-md h-full">
                            <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                                <i class="fas fa-robot text-teal-500 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">2. AI Data Room</h3>
                            <p class="text-gray-600">Our AI organizes your financials, metrics, and documents into a professional data room.</p>
                        </div>
                    </div>
                    <div class="hidden md:block">
                        <i class="fas fa-arrow-right text-gray-400 text-2xl mx-4"></i>
                    </div>
                    <div class="md:hidden">
                        <i class="fas fa-arrow-down text-gray-400 text-2xl my-4"></i>
                    </div>
                    <div class="md:w-1/3">
                        <div class="bg-white p-6 rounded-xl shadow-md h-full">
                            <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                                <i class="fas fa-handshake text-teal-500 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">3. Investor Ready</h3>
                            <p class="text-gray-600">Share your data room with potential investors or buyers with one click.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="md:flex">
                        <div class="md:w-1/2 p-8">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">What's in Your AI Data Room?</h3>
                            <ul class="space-y-4 mb-6">
                                <li class="flex items-start">
                                    <div class="bg-teal-100 p-1 rounded-full mr-3 mt-1">
                                        <i class="fas fa-check text-teal-500 text-xs"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800">Financial Statements</h4>
                                        <p class="text-sm text-gray-600 mt-1">Automatically organized P&L, balance sheet, and cash flow statements.</p>
                                    </div>
                                </li>
                                <li class="flex items-start">
                                    <div class="bg-teal-100 p-1 rounded-full mr-3 mt-1">
                                        <i class="fas fa-check text-teal-500 text-xs"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800">Key Metrics Dashboard</h4>
                                        <p class="text-sm text-gray-600 mt-1">Interactive visualization of your most important business metrics.</p>
                                    </div>
                                </li>
                                <li class="flex items-start">
                                    <div class="bg-teal-100 p-1 rounded-full mr-3 mt-1">
                                        <i class="fas fa-check text-teal-500 text-xs"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800">Customer Analysis</h4>
                                        <p class="text-sm text-gray-600 mt-1">Segmentation, retention, and lifetime value calculations.</p>
                                    </div>
                                </li>
                                <li class="flex items-start">
                                    <div class="bg-teal-100 p-1 rounded-full mr-3 mt-1">
                                        <i class="fas fa-check text-teal-500 text-xs"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800">Team Overview</h4>
                                        <p class="text-sm text-gray-600 mt-1">Organization chart and key personnel bios.</p>
                                    </div>
                                </li>
                                <li class="flex items-start">
                                    <div class="bg-teal-100 p-1 rounded-full mr-3 mt-1">
                                        <i class="fas fa-check text-teal-500 text-xs"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800">Legal Documents</h4>
                                        <p class="text-sm text-gray-600 mt-1">Secure storage for contracts, IP, and compliance docs.</p>
                                    </div>
                                </li>
                            </ul>
                            <button class="btn-primary text-white font-bold py-3 px-6 rounded-lg">
                                <i class="fas fa-play mr-2"></i> See Data Room Demo
                            </button>
                        </div>
                        <div class="md:w-1/2 bg-gray-50 p-8 border-t md:border-t-0 md:border-l border-gray-200">
                            <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-semibold text-gray-800">Sample Data Room Structure</h4>
                                    <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">AI-Generated</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-folder text-gray-400 mr-3"></i>
                                            <span>Financial Information</span>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-folder text-gray-400 mr-3"></i>
                                            <span>Customer Metrics</span>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-folder text-gray-400 mr-3"></i>
                                            <span>Product Documentation</span>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-folder text-gray-400 mr-3"></i>
                                            <span>Team & Organization</span>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-folder text-gray-400 mr-3"></i>
                                            <span>Legal & Compliance</span>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white rounded-lg shadow-sm p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-semibold text-gray-800">Recent Activity</h4>
                                    <span class="text-xs text-gray-500">Last updated: 2 hours ago</span>
                                </div>
                                <div class="space-y-4">
                                    <div class="flex items-start">
                                        <div class="bg-teal-100 p-2 rounded-full mr-3">
                                            <i class="fas fa-file-invoice-dollar text-teal-500 text-sm"></i>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-800">2023 Financials added</p>
                                            <p class="text-xs text-gray-500 mt-1">AI analyzed and categorized all transactions</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                        <div class="bg-blue-100 p-2 rounded-full mr-3">
                                            <i class="fas fa-users text-blue-500 text-sm"></i>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-800">Customer segmentation updated</p>
                                            <p class="text-xs text-gray-500 mt-1">New cohort analysis available</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                        <div class="bg-purple-100 p-2 rounded-full mr-3">
                                            <i class="fas fa-shield-alt text-purple-500 text-sm"></i>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-800">Security audit completed</p>
                                            <p class="text-xs text-gray-500 mt-1">3 recommendations to improve</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Trusted by SaaS Founders</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Hear from entrepreneurs who used Amanda Valuation to prepare for funding or acquisition.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <div class="testimonial-card bg-white p-8 rounded-xl shadow-md border border-gray-100">
                    <div class="flex items-center mb-6">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Mona Zia" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <h4 class="font-bold text-gray-800">Mona Zia</h4>
                            <p class="text-sm text-gray-600">CEO, CloudMetrics</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-6">"Amanda Valuation gave us the confidence to negotiate our Series A. We went into investor meetings with a clear valuation range and the data to back it up, which helped us secure better terms."</p>
                    <div class="flex">
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                    </div>
                </div>
                <div class="testimonial-card bg-white p-8 rounded-xl shadow-md border border-gray-100">
                    <div class="flex items-center mb-6">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Raj Patel" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <h4 class="font-bold text-gray-800">Raj Patel</h4>
                            <p class="text-sm text-gray-600">Founder, InvoiceAI</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-6">"The tech due diligence report identified several issues we weren't aware of. Fixing them before going to market added at least 20% to our eventual sale price. Worth every penny."</p>
                    <div class="flex">
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                    </div>
                </div>
                <div class="testimonial-card bg-white p-8 rounded-xl shadow-md border border-gray-100">
                    <div class="flex items-center mb-6">
                        <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Sophie Zhang" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <h4 class="font-bold text-gray-800">Sophie Zhang</h4>
                            <p class="text-sm text-gray-600">CTO, DataPipes</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-6">"The AI data room saved us weeks of work. Investors were impressed with how organized everything was, and we could focus on the pitch instead of scrambling to pull documents together."</p>
                    <div class="flex">
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star text-yellow-400"></i>
                        <i class="fas fa-star-half-alt text-yellow-400"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

<!-- Pricing -->
    <section id="pricing" class="py-16 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Simple, Transparent Pricing</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Choose the right level of service for your needs, whether you're just exploring or ready to transact.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-5xl mx-auto">
                <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Self Valuation</h3>
                    <p class="text-gray-600 text-sm mb-6">Basic valuation estimate with summary report</p>
                    <div class="text-3xl font-bold text-gray-800 mb-6">Free</div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Valuation estimate</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Summary report</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Basic insights</span>
                        </li>
                    </ul>
                    <button class="w-full btn-primary text-white font-bold py-3 px-6 rounded-lg">
                        Get Started
                    </button>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Core</h3>
                    <p class="text-gray-600 text-sm mb-6">Detailed valuation with advanced insights</p>
                    <div class="text-3xl font-bold text-gray-800 mb-6">$149<span class="text-base font-normal">/report</span></div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Detailed valuation report</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Industry benchmarks</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Actionable insights</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Basic data room setup</span>
                        </li>
                    </ul>
                    <button class="w-full btn-primary text-white font-bold py-3 px-6 rounded-lg">
                        Buy Now
                    </button>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border-2 border-teal-500 relative">
                    <span class="absolute top-0 right-0 bg-teal-500 text-white text-xs font-semibold px-3 py-1 rounded-bl-lg">Most Popular</span>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Pro</h3>
                    <p class="text-gray-600 text-sm mb-6">Full valuation with due diligence & data room</p>
                    <div class="text-3xl font-bold text-gray-800 mb-6">$499<span class="text-base font-normal">/report</span></div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Everything in Core</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Tech due diligence report</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">AI-powered data room</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Investor-ready export</span>
                        </li>
                    </ul>
                    <button class="w-full btn-primary text-white font-bold py-3 px-6 rounded-lg">
                        Buy Now
                    </button>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Enterprise</h3>
                    <p class="text-gray-600 text-sm mb-6">Custom solutions for large organizations</p>
                    <div class="text-3xl font-bold text-gray-800 mb-6">Custom</div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Everything in Pro</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Custom integrations</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">Dedicated support</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-teal-500 mr-2 mt-1"></i>
                            <span class="text-gray-600 text-sm">White-label options</span>
                        </li>
                    </ul>
                    <button class="w-full btn-secondary font-bold py-3 px-6 rounded-lg">
                        Contact Sales
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Resources -->
    <section id="resources" class="py-16 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Resources to Grow Your Business</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Explore our guides, templates, and tools to help you scale, fund, or sell your business.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <div class="feature-card bg-gray-50 p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300">
                    <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-book-open text-teal-500 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Valuation Guide</h3>
                    <p class="text-gray-600 mb-4">Learn the key factors that drive business valuations with our comprehensive guide.</p>
                    <a href="#" class="text-teal-500 font-medium hover:underline">Download Now <i class="fas fa-arrow-right ml-2"></i></a>
                </div>
                <div class="feature-card bg-gray-50 p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300">
                    <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-file-alt text-teal-500 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Investor Pitch Template</h3>
                    <p class="text-gray-600 mb-4">A proven template to create a compelling pitch deck for investors or buyers.</p>
                    <a href="#" class="text-teal-500 font-medium hover:underline">Get Template <i class="fas fa-arrow-right ml-2"></i></a>
                </div>
                <div class="feature-card bg-gray-50 p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300">
                    <div class="bg-teal-100 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-calculator text-teal-500 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Financial Model Tool</h3>
                    <p class="text-gray-600 mb-4">Use our interactive tool to forecast revenue, expenses, and cash flow.</p>
                    <a href="#" class="text-teal-500 font-medium hover:underline">Try Now <i class="fas fa-arrow-right ml-2"></i></a>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="gradient-bg text-white py-16">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-4">Ready to Know Your Business Worth?</h2>
            <p class="text-lg opacity-90 mb-8 max-w-2xl mx-auto">Join thousands of founders who used Amanda Valuation to prepare for funding, acquisition, or growth.</p>
            <a href="#valuation" class="btn-primary text-white font-bold py-3 px-8 rounded-lg inline-block">Get Started Now</a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Amanda Valuation</h3>
                    <p class="text-gray-400 mb-4">Empowering founders with fast, accurate business valuations and investor-ready insights.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-teal-400"><i class="fab fa-linkedin text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-teal-400"><i class="fab fa-twitter text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-teal-400"><i class="fab fa-youtube text-xl"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Product</h3>
                    <ul class="space-y-2">
                        <li><a href="#valuation" class="text-gray-400 hover:text-teal-400">Self Valuation</a></li>
                        <li><a href="#tech-due-diligence" class="text-gray-400 hover:text-teal-400">Tech Due Diligence</a></li>
                        <li><a href="#data-room" class="text-gray-400 hover:text-teal-400">AI Data Room</a></li>
                        <li><a href="#pricing" class="text-gray-400 hover:text-teal-400">Pricing</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Blog</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Guides</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Templates</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Company</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">About Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Careers</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Contact</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-400 text-sm">&copy; 2025 Amanda Valuation. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Navigation Toggle for Mobile
        document.getElementById('menu-toggle').addEventListener('click', () => {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });

        // Demo Modal
        const demoLinks = document.querySelectorAll('a[href="#demo"]');
        const demoModal = document.getElementById('demo-modal');
        const closeModal = document.getElementById('close-modal');
        demoLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                demoModal.classList.remove('hidden');
            });
        });
        closeModal.addEventListener('click', () => {
            demoModal.classList.add('hidden');
            const video = document.getElementById('demo-video');
            video.src = video.src; // Reset video
        });

        // Valuation Form Logic
        let currentStep = 1;
        const totalSteps = 6;
        const progressFill = document.getElementById('progress-fill');
        const steps = Array.from(document.querySelectorAll('.step'));
        const nextButtons = Array.from(document.querySelectorAll('[id^="next-btn-"]'));
        const prevButtons = Array.from(document.querySelectorAll('[id^="prev-btn-"]'));
        const startOverButton = document.getElementById('start-over');

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            progressFill.style.width = `${progress}%`;
            document.getElementById('current-step').textContent = currentStep;
        }

        function showStep(step) {
            steps.forEach((s, index) => {
                if (index + 1 === step) {
                    s.classList.remove('step-hidden');
                    s.classList.add('step-visible');
                } else {
                    s.classList.remove('step-visible');
                    s.classList.add('step-hidden');
                }
            });
            updateProgress();
        }

        nextButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                if (currentStep < totalSteps) {
                    currentStep++;
                    showStep(currentStep);
                    checkConditionalFields();
                }
            });
        });

        prevButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                if (currentStep > 1) {
                    currentStep--;
                    showStep(currentStep);
                    checkConditionalFields();
                }
            });
        });

        startOverButton.addEventListener('click', () => {
            currentStep = 1;
            showStep(currentStep);
            document.getElementById('valuationResult').classList.add('hidden');
            document.getElementById('chartsSection').classList.add('hidden');
            document.getElementById('valuation-form').classList.remove('hidden');
            resetForm();
            checkConditionalFields();
        });

        function resetForm() {
            const inputs = document.querySelectorAll('#valuation-form input, #valuation-form select');
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    input.checked = false;
                } else if (input.type === 'range') {
                    input.value = 5;
                    const valueDisplay = document.getElementById(`${input.id}Value`);
                    if (valueDisplay) valueDisplay.textContent = 5;
                } else {
                    input.value = '';
                }
            });
            toggleAIReplacement();
            toggleIPFields();
        }

        function toggleAIReplacement() {
            const aiReplaceable = document.getElementById('aiReplaceable').value;
            const aiReplaceCountSection = document.getElementById('aiReplaceCountSection');
            aiReplaceCountSection.classList.toggle('hidden', aiReplaceable !== 'yes');
            if (aiReplaceable !== 'yes') {
                document.getElementById('aiReplaceCount').value = '';
            }
        }

        function toggleIPFields() {
            const hasIP = document.getElementById('hasIP').value;
            const ipValueSection = document.getElementById('ipValueSection');
            const ipUniqueSection = document.getElementById('ipUniqueSection');
            const show = hasIP === 'yes';
            ipValueSection.classList.toggle('hidden', !show);
            ipUniqueSection.classList.toggle('hidden', !show);
            if (!show) {
                document.getElementById('ipValue').value = '';
                document.getElementById('ipUnique').value = '';
            }
        }

        function checkConditionalFields() {
            const selectedMethods = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
            const dcfFields = document.getElementById('dcfFields');
            const earningsFields = document.getElementById('earningsFields');
            dcfFields.classList.toggle('hidden', !selectedMethods.includes('dcf'));
            earningsFields.classList.toggle('hidden', !selectedMethods.includes('earnings'));
        }

        // Valuation Calculation
        function calculateValuation() {
            const selectedMethods = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
            if (selectedMethods.length === 0 || selectedMethods.length > 3) {
                alert('Please select 1 to 3 valuation methods.');
                return;
            }

            // Collect inputs
            const ownerSalary = parseFloat(document.getElementById('ownerSalary').value.replace(/,/g, '')) || 0;
            const averageSalary = parseFloat(document.getElementById('averageSalary').value.replace(/,/g, '')) || 0;
            const employeeBenefits = parseFloat(document.getElementById('employeeBenefits').value.replace(/,/g, '')) || 0;
            const staffNumber = parseInt(document.getElementById('staffNumber').value) || 0;
            const expenses = parseFloat(document.getElementById('expenses').value.replace(/,/g, '')) || 0;
            const debt = parseFloat(document.getElementById('debt').value.replace(/,/g, '')) || 0;
            const scalability = parseInt(document.getElementById('scalability').value) || 5;
            const growthRate = parseFloat(document.getElementById('growthRate').value) || 0;
            const yearsOperating = parseInt(document.getElementById('yearsOperating').value) || 0;

            const ltv = parseFloat(document.getElementById('ltv').value.replace(/,/g, '')) || 0;
            const cac = parseFloat(document.getElementById('cac').value.replace(/,/g, '')) || 0;
            const churnRate = parseFloat(document.getElementById('churnRate').value) || 0;
            const customerGrowthRate = parseFloat(document.getElementById('customerGrowthRate').value) || 0;

            const industry = document.getElementById('industry').value;
            const marketTrendImpact = parseInt(document.getElementById('marketTrendImpact').value) || 5;
            const competitivePositioning = parseInt(document.getElementById('competitivePositioning').value) || 5;
            const marketVolatility = parseInt(document.getElementById('marketVolatility').value) || 5;

            const aiReplaceable = document.getElementById('aiReplaceable').value;
            const aiReplaceCount = aiReplaceable === 'yes' ? parseInt(document.getElementById('aiReplaceCount').value) || 0 : 0;
            const hasIP = document.getElementById('hasIP').value;
            const ipValue = hasIP === 'yes' ? parseFloat(document.getElementById('ipValue').value.replace(/,/g, '')) || 0 : 0;
            const ipUnique = hasIP === 'yes' ? document.getElementById('ipUnique').value : '';
            const operationalEfficiency = parseInt(document.getElementById('operationalEfficiency').value) || 5;

            const projectedRevenue = parseFloat(document.getElementById('projectedRevenue').value.replace(/,/g, '')) || 0;
            const expectedGrowthRate = parseFloat(document.getElementById('expectedGrowthRate').value) || 0;

            let valuations = [];
            let valuationDetails = [];

            // Multiplier Method
            if (selectedMethods.includes('multiplier')) {
                const industryMultipliers = {
                    'Technology': 5,
                    'Retail': 2,
                    'Hospitality': 1.5,
                    'Media': 3,
                    'Marketing': 2.5,
                    'Construction': 1.2,
                    'Healthcare': 4,
                    'Finance': 3.5,
                    'Real Estate': 2,
                    'Education': 2.5,
                    'Transportation': 1.8,
                    'Agriculture': 1.5,
                    'Manufacturing': 2,
                    'Legal': 3,
                    'Energy': 2.5,
                    'Arts & Entertainment': 2,
                    'Other': 2
                };
                const multiplier = industryMultipliers[industry] || 2;
                let baseValue = projectedRevenue * multiplier;

                // Adjust for factors
                baseValue *= (1 + (growthRate / 100));
                baseValue *= (1 + (scalability - 5) * 0.05);
                baseValue *= (1 + (competitivePositioning - 5) * 0.03);
                baseValue *= (1 - (churnRate / 100) * 0.5);
                baseValue -= debt;

                if (hasIP === 'yes') {
                    baseValue += ipValue * (ipUnique === 'unique' ? 1.2 : 0.8);
                }

                const minValue = baseValue * 0.9;
                const maxValue = baseValue * 1.1;

                valuations.push({
                    method: 'Multiplier Method',
                    min: minValue,
                    max: maxValue,
                    avg: baseValue
                });

                valuationDetails.push(`Multiplier Method: Used an industry multiplier of ${multiplier}x for ${industry}. Adjusted for growth rate (${growthRate}%), scalability (${scalability}), competitive positioning (${competitivePositioning}), churn rate (${churnRate}%), and IP value ($${ipValue.toLocaleString()}).`);
            }

            // Income-Based Valuation
            if (selectedMethods.includes('income')) {
                let baseValue = projectedRevenue * 3;

                // Adjust for factors
                baseValue *= (1 + (expectedGrowthRate / 100));
                baseValue *= (1 + (marketTrendImpact - 5) * 0.04);
                baseValue *= (1 - (marketVolatility - 5) * 0.03);
                baseValue -= debt;

                const ltvCacRatio = ltv / (cac || 1);
                baseValue *= (ltvCacRatio > 3 ? 1.1 : ltvCacRatio < 1 ? 0.9 : 1);

                const minValue = baseValue * 0.9;
                const maxValue = baseValue * 1.1;

                valuations.push({
                    method: 'Income-Based Valuation',
                    min: minValue,
                    max: maxValue,
                    avg: baseValue
                });

                valuationDetails.push(`Income-Based Valuation: Based on projected revenue ($${projectedRevenue.toLocaleString()}) with a 3x multiplier. Adjusted for expected growth (${expectedGrowthRate}%), market trends (${marketTrendImpact}), market volatility (${marketVolatility}), and LTV/CAC ratio (${ltvCacRatio.toFixed(2)}).`);
            }

            // Earnings-Based Valuation
            if (selectedMethods.includes('earnings')) {
                const assets = parseFloat(document.getElementById('assets').value.replace(/,/g, '')) || 0;
                const netEarnings = projectedRevenue - expenses - (averageSalary * staffNumber) - employeeBenefits - ownerSalary;
                let baseValue = (netEarnings * 4) + assets;

                // Adjust for factors
                baseValue *= (1 + (operationalEfficiency - 5) * 0.05);
                baseValue *= (1 + (yearsOperating / 10));
                baseValue -= debt;

                if (aiReplaceable === 'yes') {
                    const savings = aiReplaceCount * averageSalary * 0.5;
                    baseValue += savings;
                }

                const minValue = baseValue * 0.9;
                const maxValue = baseValue * 1.1;

                valuations.push({
                    method: 'Earnings-Based Valuation',
                    min: minValue,
                    max: maxValue,
                    avg: baseValue
                });

                valuationDetails.push(`Earnings-Based Valuation: Calculated from net earnings ($${netEarnings.toLocaleString()}) with a 4x multiplier plus assets ($${assets.toLocaleString()}). Adjusted for operational efficiency (${operationalEfficiency}), years operating (${yearsOperating}), and AI replaceability savings ($${((aiReplaceCount * averageSalary * 0.5) || 0).toLocaleString()}).`);
            }

            // Discounted Cash Flow (DCF)
            if (selectedMethods.includes('dcf')) {
                const cashFlows = [
                    parseFloat(document.getElementById('cashFlow1').value.replace(/,/g, '')) || 0,
                    parseFloat(document.getElementById('cashFlow2').value.replace(/,/g, '')) || 0,
                    parseFloat(document.getElementById('cashFlow3').value.replace(/,/g, '')) || 0,
                    parseFloat(document.getElementById('cashFlow4').value.replace(/,/g, '')) || 0,
                    parseFloat(document.getElementById('cashFlow5').value.replace(/,/g, '')) || 0
                ];
                const discountRate = (parseFloat(document.getElementById('discountRate').value) || 10) / 100;
                const terminalGrowthRate = (parseFloat(document.getElementById('terminalGrowthRate').value) || 3) / 100;

                let dcfValue = 0;
                for (let i = 0; i < cashFlows.length; i++) {
                    dcfValue += cashFlows[i] / Math.pow(1 + discountRate, i + 1);
                }

                const terminalValue = (cashFlows[4] * (1 + terminalGrowthRate)) / (discountRate - terminalGrowthRate);
                dcfValue += terminalValue / Math.pow(1 + discountRate, 5);

                dcfValue -= debt;

                const minValue = dcfValue * 0.9;
                const maxValue = dcfValue * 1.1;

                valuations.push({
                    method: 'Discounted Cash Flow (DCF)',
                    min: minValue,
                    max: maxValue,
                    avg: dcfValue
                });

                valuationDetails.push(`Discounted Cash Flow (DCF): Sum of discounted cash flows over 5 years (Year 1: $${cashFlows[0].toLocaleString()}, Year 5: $${cashFlows[4].toLocaleString()}) with a discount rate of ${(discountRate * 100).toFixed(2)}% and terminal growth rate of ${(terminalGrowthRate * 100).toFixed(2)}%. Terminal value: $${terminalValue.toLocaleString()}.`);
            }

            // Calculate final valuation
            const avgValuation = valuations.reduce((sum, v) => sum + v.avg, 0) / valuations.length;
            const minValuation = valuations.reduce((min, v) => Math.min(min, v.min), valuations[0].min);
            const maxValuation = valuations.reduce((max, v) => Math.max(max, v.max), valuations[0].max);

            // Display Results
            document.getElementById('valuation-form').classList.add('hidden');
            const resultSection = document.getElementById('valuationResult');
            resultSection.classList.remove('hidden');

            // Financial Metrics
            const financialMetrics = document.getElementById('financialMetrics');
            financialMetrics.innerHTML = `
                <p><span class="font-medium">Projected Revenue:</span> $${projectedRevenue.toLocaleString()}</p>
                <p><span class="font-medium">Net Earnings:</span> $${(projectedRevenue - expenses - (averageSalary * staffNumber) - employeeBenefits - ownerSalary).toLocaleString()}</p>
                <p><span class="font-medium">LTV/CAC Ratio:</span> ${(ltv / (cac || 1)).toFixed(2)}</p>
                <p><span class="font-medium">Churn Rate:</span> ${churnRate}%</p>
                <p><span class="font-medium">Growth Rate:</span> ${growthRate}%</p>
            `;

            // Valuation Ranges
            const valuationRanges = document.getElementById('valuationRanges');
            valuationRanges.innerHTML = valuations.map(v => `
                <p><span class="font-medium">${v.method}:</span> $${Math.round(v.min).toLocaleString()} - $${Math.round(v.max).toLocaleString()}</p>
            `).join('');

            // Final Valuation
            document.getElementById('valuationAmount').textContent = `$${Math.round(avgValuation).toLocaleString()}`;
            document.getElementById('valuationAmount').dataset.value = avgValuation;

            // Valuation Factors
            const valuationFactors = document.getElementById('valuationFactors');
            valuationFactors.innerHTML = valuationDetails.map(detail => `<p class="text-sm">${detail}</p>`).join('');

            // Show Charts
            const chartsSection = document.getElementById('chartsSection');
            chartsSection.classList.remove('hidden');

            // Valuation Comparison Chart
            const valuationChart = document.getElementById('valuationChart').getContext('2d');
            new Chart(valuationChart, {
                type: 'bar',
                data: {
                    labels: valuations.map(v => v.method),
                    datasets: [{
                        label: 'Valuation Range',
                        data: valuations.map(v => v.avg),
                        backgroundColor: 'rgba(56, 178, 172, 0.6)',
                        borderColor: 'rgba(56, 178, 172, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Valuation ($)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Staff Comparison Chart
            const staffChart = document.getElementById('staffChart').getContext('2d');
            new Chart(staffChart, {
                type: 'doughnut',
                data: {
                    labels: ['Owner Salary', 'Staff Salaries', 'Benefits'],
                    datasets: [{
                        data: [ownerSalary, averageSalary * staffNumber, employeeBenefits],
                        backgroundColor: [
                            'rgba(56, 178, 172, 0.6)',
                            'rgba(45, 55, 72, 0.6)',
                            'rgba(246, 173, 85, 0.6)'
                        ],
                        borderColor: [
                            'rgba(56, 178, 172, 1)',
                            'rgba(45, 55, 72, 1)',
                            'rgba(246, 173, 85, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Income Comparison Chart
            const incomeChart = document.getElementById('incomeChart').getContext('2d');
            new Chart(incomeChart, {
                type: 'line',
                data: {
                    labels: ['Current Revenue', 'Projected Revenue'],
                    datasets: [{
                        label: 'Revenue',
                        data: [(projectedRevenue / (1 + (expectedGrowthRate / 100))), projectedRevenue],
                        fill: false,
                        borderColor: 'rgba(56, 178, 172, 1)',
                        tension: 0.1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Revenue ($)'
                            }
                        }
                    }
                }
            });

            // DCF Chart (if applicable)
            if (selectedMethods.includes('dcf')) {
                const dcfChartContainer = document.getElementById('dcfChartContainer');
                dcfChartContainer.classList.remove('hidden');
                const dcfChart = document.getElementById('dcfChart').getContext('2d');
                new Chart(dcfChart, {
                    type: 'line',
                    data: {
                        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
                        datasets: [{
                            label: 'Cash Flows',
                            data: cashFlows,
                            fill: false,
                            borderColor: 'rgba(56, 178, 172, 1)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cash Flow ($)'
                                }
                            }
                        }
                    }
                });
            }
        }

        // Export Results as PDF
        function exportResults() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(20);
            doc.text('Business Valuation Report', 20, 20);
            doc.setFontSize(12);
            doc.text('Generated by Amanda Valuation', 20, 30);
            doc.setLineWidth(0.5);
            doc.line(20, 35, 190, 35);

            let y = 45;
            doc.setFontSize(16);
            doc.text('Valuation Summary', 20, y);
            y += 10;

            doc.setFontSize(12);
            const valuationAmount = document.getElementById('valuationAmount').dataset.value;
            doc.text(`Estimated Valuation: $${Math.round(valuationAmount).toLocaleString()}`, 20, y);
            y += 10;

            const valuationRanges = document.getElementById('valuationRanges').innerHTML;
            doc.text('Valuation Ranges by Method:', 20, y);
            y += 10;
            const ranges = valuationRanges.split('</p>').filter(r => r.trim());
            ranges.forEach(range => {
                const text = range.replace(/<[^>]+>/g, '').trim();
                if (text) {
                    doc.text(text, 25, y);
                    y += 7;
                }
            });

            y += 5;
            doc.text('Key Financial Metrics:', 20, y);
            y += 10;
            const financialMetrics = document.getElementById('financialMetrics').innerHTML;
            const metrics = financialMetrics.split('</p>').filter(m => m.trim());
            metrics.forEach(metric => {
                const text = metric.replace(/<[^>]+>/g, '').trim();
                if (text) {
                    doc.text(text, 25, y);
                    y += 7;
                }
            });

            y += 5;
            doc.text('Valuation Factors:', 20, y);
            y += 10;
            const valuationFactors = document.getElementById('valuationFactors').innerHTML;
            const factors = valuationFactors.split('</p>').filter(f => f.trim());
            factors.forEach(factor => {
                const text = factor.replace(/<[^>]+>/g, '').trim();
                if (text) {
                    const lines = doc.splitTextToSize(text, 160);
                    lines.forEach(line => {
                        doc.text(line, 25, y);
                        y += 7;
                    });
                }
            });

            doc.save('Amanda_Valuation_Report.pdf');
        }

        // Save Progress
        function saveProgress() {
            const formData = {
                ownerSalary: document.getElementById('ownerSalary').value,
                averageSalary: document.getElementById('averageSalary').value,
                employeeBenefits: document.getElementById('employeeBenefits').value,
                staffNumber: document.getElementById('staffNumber').value,
                expenses: document.getElementById('expenses').value,
                debt: document.getElementById('debt').value,
                scalability: document.getElementById('scalability').value,
                growthRate: document.getElementById('growthRate').value,
                yearsOperating: document.getElementById('yearsOperating').value,
                ltv: document.getElementById('ltv').value,
                cac: document.getElementById('cac').value,
                churnRate: document.getElementById('churnRate').value,
                customerGrowthRate: document.getElementById('customerGrowthRate').value,
                industry: document.getElementById('industry').value,
                marketTrendImpact: document.getElementById('marketTrendImpact').value,
                competitivePositioning: document.getElementById('competitivePositioning').value,
                marketVolatility: document.getElementById('marketVolatility').value,
                aiReplaceable: document.getElementById('aiReplaceable').value,
                aiReplaceCount: document.getElementById('aiReplaceCount').value,
                hasIP: document.getElementById('hasIP').value,
                ipValue: document.getElementById('ipValue').value,
                ipUnique: document.getElementById('ipUnique').value,
                operationalEfficiency: document.getElementById('operationalEfficiency').value,
                projectedRevenue: document.getElementById('projectedRevenue').value,
                expectedGrowthRate: document.getElementById('expectedGrowthRate').value,
                cashFlow1: document.getElementById('cashFlow1').value,
                cashFlow2: document.getElementById('cashFlow2').value,
                cashFlow3: document.getElementById('cashFlow3').value,
                cashFlow4: document.getElementById('cashFlow4').value,
                cashFlow5: document.getElementById('cashFlow5').value,
                discountRate: document.getElementById('discountRate').value,
                terminalGrowthRate: document.getElementById('terminalGrowthRate').value,
                methods: Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value)
            };

            const blob = new Blob([JSON.stringify(formData)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'valuation_progress.json';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
