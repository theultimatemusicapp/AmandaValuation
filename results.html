<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valuation Results - SaaS Valuation App</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <style>
        .chart-container {
            position: relative;
            margin: auto;
            height: 400px;
            width: 80%;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #38B2AC 0%, #2D3748 100%);
        }
        .btn-primary {
            background-color: #38B2AC;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #2C7A7B;
        }
    </style>
</head>
<body class="font-sans">
    <!-- Header -->
    <header class="bg-gray-800 text-white py-4 sticky top-0 z-50">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="text-2xl font-bold">
                <a href="pro-valuation.html">SaaS Valuation App</a>
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="index.html#valuation" class="hover:text-teal-400">Self Valuation</a>
                <a href="blog.html" class="hover:text-teal-400">Resources</a>
            </nav>
            <button id="menu-toggle" class="md:hidden focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
        <div id="mobile-menu" class="md:hidden hidden">
            <nav class="flex flex-col space-y-4 mt-4 px-6">
                <a href="index.html#valuation" class="hover:text-teal-400">Self Valuation</a>
                <a href="blog.html" class="hover:text-teal-400">Resources</a>
            </nav>
        </div>
    </header>

    <main class="py-16">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-gray-800 text-center mb-8">Your Valuation Results</h2>

            <!-- Valuation Summary -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Summary</h3>
                <p class="text-gray-600 mb-4" id="valuationSummary">Based on your inputs, your estimated valuation range is $1,500,000 - $2,000,000. This is calculated using the selected methods (Revenue Multiplier, DCF) and adjusted for your financials, growth, and market position.</p>
                <button id="exportPdf" class="btn-primary text-white font-bold py-2 px-4 rounded-lg">Export to PDF</button>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Valuation Comparison Chart -->
                <div class="chart-container">
                    <canvas id="valuationChart"></canvas>
                </div>
                <!-- Revenue Comparison Chart -->
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
                <!-- DCF Analysis Chart -->
                <div class="chart-container">
                    <canvas id="dcfChart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- App Info -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">SaaS Valuation App</h4>
                    <p class="text-gray-400">Empower your business with accurate and actionable valuation insights using our advanced SaaS tools.</p>
                </div>
                <!-- Product -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Product</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html#valuation" class="text-gray-400 hover:text-teal-400">Self Valuation</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">AI Data Room</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Pricing</a></li>
                    </ul>
                </div>
                <!-- Resources -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="blog.html" class="text-gray-400 hover:text-teal-400">Blog</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Valuation Guide</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-teal-400">Due Diligence Checklist</a></li>
                    </ul>
                </div>
                <!-- Legal -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2">
                        <li><a href="privacy-policy.html" class="text-gray-400 hover:text-teal-400">Privacy Policy</a></li>
                        <li><a href="terms-and-conditions.html" class="text-gray-400 hover:text-teal-400">Terms and Conditions</a></li>
                    </ul>
                </div>
            </div>
            <div class="text-center mt-8 text-gray-400">
                <p>Â© 2025 SaaS Valuation App. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.getElementById('menu-toggle').addEventListener('click', () => {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });

        // Load form data from localStorage
        const formData = JSON.parse(localStorage.getItem('valuationFormData')) || {};
        const arr = parseFloat(formData.arr?.replace(/,/g, '') || 0);
        const revenueGrowthRate = parseFloat(formData.revenueGrowthRate || 0) / 100;
        const projectedRevenue = parseFloat(formData.projectedRevenue?.replace(/,/g, '') || arr * (1 + revenueGrowthRate) * 3);

        // Update summary with dynamic values
        const valuationSummary = document.getElementById('valuationSummary');
        const minValuation = arr * 2; // Example: 2x ARR
        const maxValuation = projectedRevenue * 1.5; // Example: 1.5x projected revenue
        valuationSummary.textContent = `Based on your inputs, your estimated valuation range is $${minValuation.toLocaleString()} - $${maxValuation.toLocaleString()}. This is calculated using the selected methods (Revenue Multiplier, DCF) and adjusted for your financials, growth, and market position.`;

        // Chart.js Configurations
        const valuationCtx = document.getElementById('valuationChart').getContext('2d');
        new Chart(valuationCtx, {
            type: 'bar',
            data: {
                labels: ['Revenue Multiplier', 'DCF'],
                datasets: [{
                    label: 'Valuation ($)',
                    data: [minValuation, maxValuation],
                    backgroundColor: ['#38B2AC', '#ED8936'],
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                plugins: { legend: { labels: { color: '#4a5568' } } }
            }
        });

        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: ['Current', 'Year 1', 'Year 2', 'Year 3'],
                datasets: [{
                    label: 'Revenue ($)',
                    data: [arr, arr * (1 + revenueGrowthRate), arr * (1 + revenueGrowthRate) * 2, projectedRevenue],
                    borderColor: '#38B2AC',
                    fill: false
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                plugins: { legend: { labels: { color: '#4a5568' } } }
            }
        });

        const dcfCtx = document.getElementById('dcfChart').getContext('2d');
        new Chart(dcfCtx, {
            type: 'bar',
            data: {
                labels: ['Year 1', 'Year 2', 'Year 3'],
                datasets: [{
                    label: 'Discounted Cash Flow ($)',
                    data: [arr * 0.9, arr * 0.85, projectedRevenue * 0.8],
                    backgroundColor: '#ED8936',
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                plugins: { legend: { labels: { color: '#4a5568' } } }
            }
        });

        // PDF Export using html2pdf
        document.getElementById('exportPdf').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const element = document.querySelector('main');
            const opt = {
                margin: [10, 10, 10, 10],
                filename: 'valuation_report.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</body>
</html>
