<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta tags for SEO and accessibility -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Pro Valuation Tool for SaaS businesses, offering advanced valuation insights and professional PDF reports.">
  <meta name="keywords" content="SaaS valuation, business valuation, pro valuation, SaaS metrics">
  <meta name="author" content="SaaS Valuation App">
  <meta name="robots" content="index, follow">
  <title>Pro Valuation - SaaS Valuation App</title>

  <!-- External dependencies -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>

  <!-- Inline styles for centered layout and header -->
  <style>
    /* Center body content with a constrained width */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #f9fafb; /* bg-gray-50 */
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    /* Ensure main content is centered */
    main {
      flex: 1;
      max-width: 896px; /* Equivalent to max-w-4xl (64rem) */
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      padding: 2rem 1rem; /* py-8 px-4 */
    }
    /* Hide elements by default */
    .hidden {
      display: none;
    }
    /* Header link styling */
    .header-link {
      transition: color 0.2s ease;
    }
    .header-link:hover {
      color: #5eead4; /* Teal-300 for hover */
    }
    /* Mobile menu styling */
    .mobile-menu-link {
      transition: color 0.2s ease;
    }
    .mobile-menu-link:hover {
      color: #5eead4; /* Teal-300 for hover */
    }
    /* Responsive header navigation */
    @media (max-width: 768px) {
      .desktop-nav {
        display: none;
      }
      .mobile-menu {
        display: flex;
        flex-direction: column;
      }
      main {
        padding: 1rem; /* Reduce padding on mobile */
      }
    }
    @media (min-width: 769px) {
      .mobile-menu {
        display: none !important;
      }
    }
  </style>
  <!-- Additional CSS styles for form, steps, and results -->
  <style>
    /* Form container styling */
    #valuation-form {
      max-width: 896px; /* Matches max-w-4xl */
      margin: 0 auto;
      background-color: #ffffff; /* bg-white */
      padding: 1.5rem; /* p-6 */
      border-radius: 0.5rem; /* rounded-lg */
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
    }

    /* Progress bar styling */
    .progress-bar-container {
      margin-bottom: 2rem; /* mb-8 */
    }
    .progress-bar-container .flex {
      justify-content: space-between;
      margin-bottom: 0.5rem; /* mb-2 */
    }
    .progress-bar-container .text-sm {
      font-size: 0.875rem;
      color: #4b5563; /* text-gray-600 */
    }
    .progress-bar-container .bg-gray-200 {
      background-color: #e5e7eb; /* bg-gray-200 */
      border-radius: 9999px; /* rounded-full */
      height: 0.625rem; /* h-2.5 */
    }
    #progress-bar {
      background-color: #14b8a6; /* bg-teal-500 */
      height: 0.625rem;
      border-radius: 9999px;
      transition: width 0.3s ease;
    }

    /* Form step styling */
    .step {
      display: none;
    }
    .step-visible {
      display: block;
    }
    .step h3 {
      font-size: 1.125rem; /* text-lg */
      font-weight: 500; /* font-medium */
      color: #1f2937; /* text-gray-800 */
      margin-bottom: 1rem; /* mb-4 */
    }

    /* Input and label styling */
    label {
      display: block;
      font-size: 0.875rem; /* text-sm */
      font-weight: 500; /* font-medium */
      color: #374151; /* text-gray-700 */
      margin-bottom: 0.25rem; /* mb-1 */
    }
    input[type="text"],
    input[type="email"],
    input[type="number"],
    select {
      width: 100%; /* w-full */
      border: 1px solid #d1d5db; /* border-gray-300 */
      border-radius: 0.375rem; /* rounded-md */
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem; /* sm:text-sm */
      line-height: 1.25;
    }
    input:focus,
    select:focus {
      outline: none;
      border-color: #14b8a6; /* focus:border-teal-500 */
      box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.3); /* focus:ring-teal-500 */
    }
    input[type="checkbox"] {
      height: 1rem; /* h-4 */
      width: 1rem; /* w-4 */
      color: #14b8a6; /* text-teal-500 */
      border: 1px solid #d1d5db; /* border-gray-300 */
      border-radius: 0.25rem; /* rounded */
    }
    input[type="checkbox"]:focus {
      box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.3);
    }

    /* Error message styling */
    .text-red-500 {
      color: #ef4444; /* text-red-500 */
      font-size: 0.875rem; /* text-sm */
      margin-top: 0.25rem; /* mt-1 */
    }

    /* Tooltip (explanation-box) styling */
    .learn-more {
      cursor: pointer;
      color: #6b7280; /* text-gray-500 */
      font-size: 0.875rem;
      margin-left: 0.5rem;
    }
    .learn-more:hover {
      color: #4b5563; /* text-gray-600 */
    }
    .explanation-box {
      background-color: #e5e7eb; /* bg-gray-200 */
      padding: 0.75rem; /* p-3 */
      border-radius: 0.375rem; /* rounded-md */
      color: #374151; /* text-gray-700 */
      font-size: 0.875rem; /* text-sm */
      margin-top: 0.5rem; /* mt-2 */
    }

    /* Button styling */
    .btn-primary {
      background-color: #14b8a6; /* bg-teal-500 */
      color: #ffffff; /* text-white */
      font-weight: 700; /* font-bold */
      padding: 0.5rem 1rem; /* py-2 px-4 */
      border-radius: 0.375rem; /* rounded-lg */
      transition: background-color 0.3s ease; /* transition-colors duration-300 */
    }
    .btn-primary:hover {
      background-color: #0d9488; /* bg-teal-600 */
    }
    button:not(.btn-primary) {
      background-color: #d1d5db; /* bg-gray-300 */
      color: #374151; /* text-gray-700 */
      font-weight: 700; /* font-bold */
      padding: 0.5rem 1rem; /* py-2 px-4 */
      border-radius: 0.375rem; /* rounded-lg */
      transition: background-color 0.3s ease;
    }
    button:not(.btn-primary):hover {
      background-color: #9ca3af; /* bg-gray-400 */
    }

    /* Results section styling */
    #results {
      max-width: 896px; /* Matches max-w-4xl */
      margin: 2rem auto 0; /* mt-8 */
      background-color: #ffffff; /* bg-white */
      padding: 1.5rem; /* p-6 */
      border-radius: 0.375rem; /* rounded-lg */
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
    }
    #results h2 {
      font-size: 1.25rem; /* text-xl */
      font-weight: 600; /* font-semibold */
      color: #374151; /* text-gray-700 */
      margin-bottom: 1rem; /* mb-4 */
    }
    #results-content {
      margin-bottom: 1rem; /* mb-4 */
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      #valuation-form,
      #results {
        padding: 1rem; /* Reduced padding on mobile */
      }
      input[type="text"],
      input[type="email"],
      input[type="number"],
      select {
        font-size: 0.875rem; /* Consistent font size */
      }
      .btn-primary,
      button:not(.btn-primary) {
        padding: 0.5rem 0.75rem; /* Slightly smaller buttons */
      }
    }
  </style>
</head>
<body class="font-sans bg-gray-50 min-h-screen flex flex-col">
  <!-- Header with dark gray background and mobile menu -->
  <header class="bg-gray-800 text-white py-3 sticky top-0 z-50 shadow">
    <div class="container mx-auto px-4 flex justify-between items-center">
      <!-- Logo and brand name -->
      <div class="text-xl font-bold">
        <a href="index.html" aria-label="SaaS Valuation App Home">SaaS Valuation App</a>
      </div>
      <!-- Desktop navigation -->
      <nav class="desktop-nav hidden md:flex space-x-4" aria-label="Main navigation">
        <a href="index.html#valuation" class="header-link px-4 py-2 text-sm" aria-label="Free Valuation">Free Valuation</a>
        <a href="index.html#resources" class="header-link px-4 py-2 text-sm" aria-label="About">About</a>
        <a href="index.html#pricing" class="header-link px-4 py-2 text-sm" aria-label="Pricing">Pricing</a>
        <a href="blog.html" class="header-link px-4 py-2 text-sm" aria-label="Resources">Resources</a>
      </nav>
      <!-- Mobile menu toggle button -->
      <button id="menu-toggle" class="md:hidden focus:outline-none" aria-label="Toggle Menu">
        <i class="fas fa-bars text-xl"></i>
      </button>
    </div>
    <!-- Mobile menu (hidden by default) -->
    <div id="mobile-menu" class="mobile-menu md:hidden hidden px-4 pb-4">
      <nav class="flex flex-col space-y-2 mt-3" aria-label="Mobile navigation">
        <a href="index.html#valuation" class="mobile-menu-link hover:text-teal-400 text-sm" aria-label="Free Valuation">Free Valuation</a>
        <a href="index.html#resources" class="mobile-menu-link hover:text-teal-400 text-sm" aria-label="About">About</a>
        <a href="index.html#pricing" class="mobile-menu-link hover:text-teal-400 text-sm" aria-label="Pricing">Pricing</a>
        <a href="blog.html" class="mobile-menu-link hover:text-teal-400 text-sm" aria-label="Resources">Resources</a>
      </nav>
    </div>
  </header>

  <!-- Main content area, centered -->
  <main class="container">
    <!-- Page title -->
    <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 tracking-tight">
      Pro Valuation Tool
    </h1>
    <!-- Introductory paragraph -->
    <p class="text-gray-600 mb-8 text-base md:text-lg">
      Unlock advanced valuation insights with our Pro Valuation tool, tailored for SaaS businesses. 
      Select your business type, analyze multiple valuation methods, and download a professional PDF report with actionable insights and 5-year revenue projections.
    </p>
    <!-- Form section placeholder -->
    <section id="valuation-form" class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Start Your Pro Valuation</h2>
      <p class="text-gray-500 mb-6">Complete the form below to receive a comprehensive valuation report, including 5-year revenue projections.</p>
      <!-- Form content will be added in Part 2 -->
    </section>
  <!-- Form container for multi-step valuation -->
    <section id="valuation-form" class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Start Your Pro Valuation</h2>
      <p class="text-gray-500 mb-6">Complete the form below to receive a comprehensive valuation report, including 5-year revenue projections.</p>

      <!-- Progress bar for 8 steps -->
      <div class="mb-8">
        <div class="flex justify-between mb-2">
          <span class="text-sm text-gray-600">Step 1 of 8</span>
          <span class="text-sm text-gray-600">12.5% Complete</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div id="progress-bar" class="bg-teal-500 h-2.5 rounded-full" style="width: 12.5%"></div>
        </div>
      </div>

      <!-- Form element -->
      <form id="valuation-form-element" class="space-y-6">
        <!-- Step 1: SaaS Business Type -->
        <div id="step-1" class="step step-visible" data-step="1">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 1: SaaS Business Type</h3>
          <div class="mb-4">
            <label for="saas-type" class="block text-sm font-medium text-gray-700 mb-1">
              What type of SaaS business are you?
              <span class="text-gray-500 cursor-pointer learn-more" data-tip="saas-type-tip">Learn more</span>
            </label>
            <select id="saas-type" name="saas-type" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="saas-type-error saas-type-tip">
              <option value="" disabled selected>Select your SaaS type</option>
              <option value="ai-saas">AI SaaS (e.g., AI analytics, machine learning)</option>
              <option value="fintech-saas">FinTech SaaS (e.g., payment platforms, lending)</option>
              <option value="healthtech-saas">HealthTech SaaS (e.g., telehealth, medical software)</option>
              <option value="edtech-saas">EdTech SaaS (e.g., e-learning, educational platforms)</option>
              <option value="vertical-saas">Vertical SaaS (e.g., industry-specific solutions)</option>
              <option value="horizontal-saas">Horizontal SaaS (e.g., cross-industry tools)</option>
              <option value="b2b-saas">B2B SaaS (e.g., enterprise software)</option>
              <option value="b2c-saas">B2C SaaS (e.g., consumer apps, subscriptions)</option>
              <option value="crm-saas">CRM SaaS (e.g., customer relationship management)</option>
              <option value="marketing-saas">Marketing SaaS (e.g., ad platforms, email marketing)</option>
              <option value="hrtech-saas">HRTech SaaS (e.g., payroll, recruitment)</option>
              <option value="cybersecurity-saas">Cybersecurity SaaS (e.g., threat detection)</option>
              <option value="ecommerce-saas">E-commerce SaaS (e.g., storefronts, marketplaces)</option>
              <option value="collaboration-saas">Collaboration SaaS (e.g., team communication tools)</option>
              <option value="other-saas">Other SaaS (e.g., custom or niche solutions)</option>
            </select>
            <p id="saas-type-error" class="hidden text-red-500 text-sm mt-1">Please select a SaaS business type.</p>
            <div id="saas-type-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
              <p>Your SaaS business type affects the valuation multiplier. For example, high-growth sectors like AI SaaS may increase the multiplier, while competitive markets like CRM SaaS may lower it.</p>
            </div>
          </div>
          <div class="flex justify-between">
            <button type="button" id="next-1" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>
        <!-- Additional steps will be added in Parts 3–5 -->
      </form>
    </section>
    <!-- Step 2: Valuation Methods -->
        <div id="step-2" class="step hidden" data-step="2">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 2: Valuation Methods</h3>
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Select up to three valuation methods
              <span class="text-gray-500 cursor-pointer learn-more" data-tip="valuation-methods-tip">Learn more</span>
            </label>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" name="valuation-methods" value="revenue-multiplier" class="h-4 w-4 text-teal-500 border-gray-300 rounded focus:ring-teal-500" aria-describedby="valuation-methods-error">
                <span class="ml-2 text-sm text-gray-600">Revenue Multiplier (based on ARR/MRR)</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" name="valuation-methods" value="income-based" class="h-4 w-4 text-teal-500 border-gray-300 rounded focus:ring-teal-500" aria-describedby="valuation-methods-error">
                <span class="ml-2 text-sm text-gray-600">Income-Based (based on net income)</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" name="valuation-methods" value="dcf" class="h-4 w-4 text-teal-500 border-gray-300 rounded focus:ring-teal-500" aria-describedby="valuation-methods-error">
                <span class="ml-2 text-sm text-gray-600">Discounted Cash Flow (DCF)</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" name="valuation-methods" value="earnings-based" class="h-4 w-4 text-teal-500 border-gray-300 rounded focus:ring-teal-500" aria-describedby="valuation-methods-error">
                <span class="ml-2 text-sm text-gray-600">Earnings-Based (based on EBITDA)</span>
              </label>
            </div>
            <p id="valuation-methods-error" class="hidden text-red-500 text-sm mt-1">Please select at least one valuation method.</p>
            <div id="valuation-methods-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
              <p>Choose methods to evaluate your SaaS business. Revenue Multiplier uses ARR/MRR, Income-Based focuses on net income, DCF projects future cash flows, and Earnings-Based uses EBITDA. Select up to three for a comprehensive valuation.</p>
            </div>
          </div>
          <div class="flex justify-between">
            <button type="button" id="back-2" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="next-2" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>

    <!-- Step 3: Financial Metrics -->
        <div id="step-3" class="step hidden" data-step="3">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 3: Financial Metrics</h3>
          <div class="space-y-4">
            <!-- ARR -->
            <div>
              <label for="arr" class="block text-sm font-medium text-gray-700 mb-1">
                Annual Recurring Revenue (ARR) ($)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="arr-tip">Learn more</span>
              </label>
              <input type="number" id="arr" name="arr" min="0" step="1000" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="arr-error arr-tip">
              <p id="arr-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid ARR (positive number).</p>
              <div id="arr-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>ARR is your total recurring revenue annualized. For example, if your MRR is $10,000, your ARR is $120,000. This drives revenue-based valuations.</p>
              </div>
            </div>
            <!-- MRR -->
            <div>
              <label for="mrr" class="block text-sm font-medium text-gray-700 mb-1">
                Monthly Recurring Revenue (MRR) ($)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="mrr-tip">Learn more</span>
              </label>
              <input type="number" id="mrr" name="mrr" min="0" step="100" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="mrr-error mrr-tip">
              <p id="mrr-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid MRR (positive number).</p>
              <div id="mrr-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>MRR is your recurring revenue per month, excluding one-time fees. It’s a key metric for SaaS valuations.</p>
              </div>
            </div>
            <!-- Gross Margin -->
            <div>
              <label for="gross-margin" class="block text-sm font-medium text-gray-700 mb-1">
                Gross Margin (%)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="gross-margin-tip">Learn more</span>
              </label>
              <input type="number" id="gross-margin" name="gross-margin" min="0" max="100" step="1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="gross-margin-error gross-margin-tip">
              <p id="gross-margin-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid gross margin (0–100%).</p>
              <div id="gross-margin-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Gross margin is your revenue minus cost of goods sold, expressed as a percentage. Higher margins indicate better profitability.</p>
              </div>
            </div>
          </div>
          <div class="flex justify-between mt-6">
            <button type="button" id="back-3" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="next-3" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>
        <!-- Step 4: Growth Metrics -->
        <div id="step-4" class="step hidden" data-step="4">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 4: Growth Metrics</h3>
          <div class="space-y-4">
            <!-- YoY Revenue Growth -->
            <div>
              <label for="yoy-growth" class="block text-sm font-medium text-gray-700 mb-1">
                Year-over-Year Revenue Growth (%)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="yoy-growth-tip">Learn more</span>
              </label>
              <input type="number" id="yoy-growth" name="yoy-growth" min="0" max="100" step="1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="yoy-growth-error yoy-growth-tip">
              <p id="yoy-growth-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid growth rate (0–100%).</p>
              <div id="yoy-growth-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>YoY Revenue Growth is the percentage increase in revenue from last year to this year. Higher growth rates boost valuation multipliers.</p>
              </div>
            </div>
            <!-- Customer Growth Rate -->
            <div>
              <label for="customer-growth" class="block text-sm font-medium text-gray-700 mb-1">
                Customer Growth Rate (%)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="customer-growth-tip">Learn more</span>
              </label>
              <input type="number" id="customer-growth" name="customer-growth" min="0" max="100" step="1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="customer-growth-error customer-growth-tip">
              <p id="customer-growth-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid growth rate (0–100%).</p>
              <div id="customer-growth-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Customer Growth Rate is the percentage increase in your customer base annually. Strong growth signals scalability.</p>
              </div>
            </div>
            <!-- Net Revenue Retention -->
            <div>
              <label for="nrr" class="block text-sm font-medium text-gray-700 mb-1">
                Net Revenue Retention (NRR) (%)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="nrr-tip">Learn more</span>
              </label>
              <input type="number" id="nrr" name="nrr" min="0" max="200" step="1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="nrr-error nrr-tip">
              <p id="nrr-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid NRR (0–200%).</p>
              <div id="nrr-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>NRR measures revenue retained from existing customers, including upsells, minus churn. NRR above 100% indicates strong customer retention and expansion.</p>
              </div>
            </div>
          </div>
          <div class="flex justify-between mt-6">
            <button type="button" id="back-4" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="next-4" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>

        <!-- Step 5: Customer Metrics -->
        <div id="step-5" class="step hidden" data-step="5">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 5: Customer Metrics</h3>
          <div class="space-y-4">
            <!-- Customer Acquisition Cost -->
            <div>
              <label for="cac" class="block text-sm font-medium text-gray-700 mb-1">
                Customer Acquisition Cost (CAC) ($)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="cac-tip">Learn more</span>
              </label>
              <input type="number" id="cac" name="cac" min="0" step="100" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="cac-error cac-tip">
              <p id="cac-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid CAC (positive number).</p>
              <div id="cac-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>CAC is the average cost to acquire a new customer, including marketing and sales expenses. Lower CAC improves valuation.</p>
              </div>
            </div>
            <!-- Customer Lifetime Value -->
            <div>
              <label for="ltv" class="block text-sm font-medium text-gray-700 mb-1">
                Customer Lifetime Value (LTV) ($)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="ltv-tip">Learn more</span>
              </label>
              <input type="number" id="ltv" name="ltv" min="0" step="100" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="ltv-error ltv-tip">
              <p id="ltv-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid LTV (positive number).</p>
              <div id="ltv-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>LTV is the estimated revenue from a customer over their lifetime. Higher LTV relative to CAC signals profitability.</p>
              </div>
            </div>
            <!-- Monthly Churn Rate -->
            <div>
              <label for="churn" class="block text-sm font-medium text-gray-700 mb-1">
                Monthly Churn Rate (%)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="churn-tip">Learn more</span>
              </label>
              <input type="number" id="churn" name="churn" min="0" max="20" step="0.1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="churn-error churn-tip">
              <p id="churn-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid churn rate (0–20%).</p>
              <div id="churn-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Monthly Churn Rate is the percentage of customers who cancel each month. Lower churn improves retention and valuation.</p>
              </div>
            </div>
          </div>
          <div class="flex justify-between mt-6">
            <button type="button" id="back-5" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="next-5" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>
        <!-- Step 6: Other Metrics -->
        <div id="step-6" class="step hidden" data-step="6">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 6: Other Metrics</h3>
          <div class="space-y-4">
            <!-- Total Addressable Market -->
            <div>
              <label for="tam" class="block text-sm font-medium text-gray-700 mb-1">
                Total Addressable Market (TAM) ($M)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="tam-tip">Learn more</span>
              </label>
              <input type="number" id="tam" name="tam" min="0" step="1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="tam-error tam-tip">
              <p id="tam-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid TAM (positive number).</p>
              <div id="tam-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>TAM is the total market opportunity for your SaaS product in millions. A larger TAM suggests higher growth potential.</p>
              </div>
            </div>
            <!-- Employee Count -->
            <div>
              <label for="employee-count" class="block text-sm font-medium text-gray-700 mb-1">
                Employee Count
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="employee-count-tip">Learn more</span>
              </label>
              <input type="number" id="employee-count" name="employee-count" min="0" step="1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="employee-count-error employee-count-tip">
              <p id="employee-count-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid employee count (positive number).</p>
              <div id="employee-count-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Employee Count reflects your team size, indicating operational scale and resource needs.</p>
              </div>
            </div>
            <!-- Funding Raised -->
            <div>
              <label for="funding" class="block text-sm font-medium text-gray-700 mb-1">
                Funding Raised ($M)
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="funding-tip">Learn more</span>
              </label>
              <input type="number" id="funding" name="funding" min="0" step="0.1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="funding-error funding-tip">
              <p id="funding-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid funding amount (positive number).</p>
              <div id="funding-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Funding Raised is the total capital raised from investors, in millions. It signals market confidence and growth potential.</p>
              </div>
            </div>
          </div>
          <div class="flex justify-between mt-6">
            <button type="button" id="back-6" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="next-6" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>

        <!-- Step 7: Contact -->
        <div id="step-7" class="step hidden" data-step="7">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 7: Contact Information</h3>
          <div class="space-y-4">
            <!-- Name -->
            <div>
              <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
                Name
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="name-tip">Learn more</span>
              </label>
              <input type="text" id="name" name="name" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="name-error name-tip">
              <p id="name-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid name.</p>
              <div id="name-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Your name is used to personalize the valuation report and for contact purposes.</p>
              </div>
            </div>
            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
                Email
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="email-tip">Learn more</span>
              </label>
              <input type="email" id="email" name="email" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="email-error email-tip">
              <p id="email-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid email address.</p>
              <div id="email-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Your email is used to send the valuation report and for communication.</p>
              </div>
            </div>
            <!-- Company Name -->
            <div>
              <label for="company" class="block text-sm font-medium text-gray-700 mb-1">
                Company Name
                <span class="text-gray-500 cursor-pointer learn-more" data-tip="company-tip">Learn more</span>
              </label>
              <input type="text" id="company" name="company" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm" required aria-describedby="company-error company-tip">
              <p id="company-error" class="hidden text-red-500 text-sm mt-1">Please enter a valid company name.</p>
              <div id="company-tip" class="hidden explanation-box bg-gray-200 p-3 rounded-md text-gray-700 text-sm mt-2">
                <p>Your company name is included in the valuation report for identification.</p>
              </div>
            </div>
          </div>
          <div class="flex justify-between mt-6">
            <button type="button" id="back-7" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="next-7" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Next
            </button>
          </div>
        </div>

        <!-- Step 8: Review -->
        <div id="step-8" class="step hidden" data-step="8">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Step 8: Review Your Inputs</h3>
          <div class="mb-4">
            <p class="text-sm text-gray-600 mb-2">Please review your inputs before submitting:</p>
            <ul id="review-list" class="list-disc pl-5 text-sm text-gray-700 space-y-1">
              <!-- Populated by JavaScript in Part 7 -->
              <li>SaaS Type: <span id="review-saas-type">[To be filled]</span></li>
              <li>Valuation Methods: <span id="review-methods">[To be filled]</span></li>
              <li>ARR: <span id="review-arr">[To be filled]</span></li>
              <li>MRR: <span id="review-mrr">[To be filled]</span></li>
              <li>Gross Margin: <span id="review-gross-margin">[To be filled]</span></li>
              <li>YoY Growth: <span id="review-yoy-growth">[To be filled]</span></li>
              <li>Customer Growth: <span id="review-customer-growth">[To be filled]</span></li>
              <li>NRR: <span id="review-nrr">[To be filled]</span></li>
              <li>CAC: <span id="review-cac">[To be filled]</span></li>
              <li>LTV: <span id="review-ltv">[To be filled]</span></li>
              <li>Churn Rate: <span id="review-churn">[To be filled]</span></li>
              <li>TAM: <span id="review-tam">[To be filled]</span></li>
              <li>Employee Count: <span id="review-employee-count">[To be filled]</span></li>
              <li>Funding Raised: <span id="review-funding">[To be filled]</span></li>
              <li>Name: <span id="review-name">[To be filled]</span></li>
              <li>Email: <span id="review-email">[To be filled]</span></li>
              <li>Company: <span id="review-company">[To be filled]</span></li>
            </ul>
          </div>
          <div class="flex justify-between mt-6">
            <button type="button" id="back-8" class="bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300">
              Back
            </button>
            <button type="button" id="submit" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600">
              Submit
            </button>
          </div>
        </div>
      </form>

      <!-- Results Display -->
      <section id="results" class="hidden mt-8 bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Your Valuation Results</h2>
        <p class="text-gray-600 mb-4">Below is your SaaS valuation based on your inputs, including the impact of your SaaS business type.</p>
        <div id="results-content" class="space-y-4">
          <!-- Populated by JavaScript in Part 8 -->
          <p>Valuation Range: <span id="valuation-range">[Calculating...]</span></p>
          <p>SaaS Type Multiplier Impact: <span id="saas-type-impact">[Calculating...]</span></p>
        </div>
        <button id="download-pdf" class="btn-primary bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 hover:bg-teal-600 mt-4">
          Download PDF Report
        </button>
      </section>
    <!-- JavaScript for form setup, navigation, validation, and review -->
  <script>
    // Initialize DOM elements
    const form = document.getElementById('valuation-form-element');
    const steps = document.querySelectorAll('.step');
    const progressBar = document.getElementById('progress-bar');
    const learnMoreSpans = document.querySelectorAll('.learn-more');
    const mobileMenuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');

    // Current step tracking
    let currentStep = 1;

    // Format number with commas and prefix/suffix
    function formatNumber(value, prefix = '', suffix = '') {
      if (!value && value !== 0) return '[Not provided]';
      return prefix + Number(value).toLocaleString('en-US') + suffix;
    }

    // Validate step inputs
    function validateStep(step) {
      const stepDiv = document.getElementById(`step-${step}`);
      let isValid = true;

      if (step === 1) {
        const saasType = document.getElementById('saas-type').value;
        const error = document.getElementById('saas-type-error');
        if (!saasType) {
          error.classList.remove('hidden');
          isValid = false;
        } else {
          error.classList.add('hidden');
        }
      } else if (step === 2) {
        const methods = document.querySelectorAll('input[name="valuation-methods"]:checked');
        const error = document.getElementById('valuation-methods-error');
        if (methods.length === 0) {
          error.classList.remove('hidden');
          isValid = false;
        } else {
          error.classList.add('hidden');
        }
      } else if (step === 3) {
        const inputs = ['arr', 'mrr', 'gross-margin'];
        inputs.forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          const value = input.value;
          if (value === '' || (id !== 'gross-margin' && value < 0) || (id === 'gross-margin' && (value < 0 || value > 100))) {
            error.classList.remove('hidden');
            isValid = false;
          } else {
            error.classList.add('hidden');
          }
        });
      } else if (step === 4) {
        const inputs = ['yoy-growth', 'customer-growth', 'nrr'];
        inputs.forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          const value = input.value;
          const max = id === 'nrr' ? 200 : 100;
          if (value === '' || value < 0 || value > max) {
            error.classList.remove('hidden');
            isValid = false;
          } else {
            error.classList.add('hidden');
          }
        });
      } else if (step === 5) {
        const inputs = ['cac', 'ltv', 'churn'];
        inputs.forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          const value = input.value;
          const max = id === 'churn' ? 20 : Infinity;
          if (value === '' || value < 0 || value > max) {
            error.classList.remove('hidden');
            isValid = false;
          } else {
            error.classList.add('hidden');
          }
        });
      } else if (step === 6) {
        const inputs = ['tam', 'employee-count', 'funding'];
        inputs.forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          const value = input.value;
          if (value === '' || value < 0) {
            error.classList.remove('hidden');
            isValid = false;
          } else {
            error.classList.add('hidden');
          }
        });
      } else if (step === 7) {
        const inputs = ['name', 'email', 'company'];
        inputs.forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          const value = input.value;
          const isValidEmail = id === 'email' ? /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value) : value.trim() !== '';
          if (!isValidEmail) {
            error.classList.remove('hidden');
            isValid = false;
          } else {
            error.classList.add('hidden');
          }
        });
      }

      return isValid;
    }

    // Show specific step
    function showStep(step) {
      steps.forEach(s => s.classList.remove('step-visible'));
      document.getElementById(`step-${step}`).classList.add('step-visible');
      progressBar.style.width = `${step * 12.5}%`;
      currentStep = step;
    }

    // Populate review list in Step 8
    function populateReviewList() {
      document.getElementById('review-saas-type').textContent = document.getElementById('saas-type').options[document.getElementById('saas-type').selectedIndex].text;
      const methods = Array.from(document.querySelectorAll('input[name="valuation-methods"]:checked')).map(m => m.value).join(', ');
      document.getElementById('review-methods').textContent = methods || '[None selected]';
      document.getElementById('review-arr').textContent = formatNumber(document.getElementById('arr').value, '$');
      document.getElementById('review-mrr').textContent = formatNumber(document.getElementById('mrr').value, '$');
      document.getElementById('review-gross-margin').textContent = formatNumber(document.getElementById('gross-margin').value, '', '%');
      document.getElementById('review-yoy-growth').textContent = formatNumber(document.getElementById('yoy-growth').value, '', '%');
      document.getElementById('review-customer-growth').textContent = formatNumber(document.getElementById('customer-growth').value, '', '%');
      document.getElementById('review-nrr').textContent = formatNumber(document.getElementById('nrr').value, '', '%');
      document.getElementById('review-cac').textContent = formatNumber(document.getElementById('cac').value, '$');
      document.getElementById('review-ltv').textContent = formatNumber(document.getElementById('ltv').value, '$');
      document.getElementById('review-churn').textContent = formatNumber(document.getElementById('churn').value, '', '%');
      document.getElementById('review-tam').textContent = formatNumber(document.getElementById('tam').value, '$', 'M');
      document.getElementById('review-employee-count').textContent = formatNumber(document.getElementById('employee-count').value);
      document.getElementById('review-funding').textContent = formatNumber(document.getElementById('funding').value, '$', 'M');
      document.getElementById('review-name').textContent = document.getElementById('name').value || '[Not provided]';
      document.getElementById('review-email').textContent = document.getElementById('email').value || '[Not provided]';
      document.getElementById('review-company').textContent = document.getElementById('company').value || '[Not provided]';
    }

    // Event listeners for navigation
    document.querySelectorAll('[id^="next-"]').forEach(btn => {
      btn.addEventListener('click', () => {
        if (validateStep(currentStep)) {
          if (currentStep < 8) {
            showStep(currentStep + 1);
            if (currentStep === 7) populateReviewList();
          }
        }
      });
    });
    document.querySelectorAll('[id^="back-"]').forEach(btn => {
      btn.addEventListener('click', () => {
        if (currentStep > 1) showStep(currentStep - 1);
      });
    });
    document.getElementById('submit').addEventListener('click', () => {
      if (validateStep(currentStep)) {
        document.getElementById('results').classList.remove('hidden');
        form.classList.add('hidden');
        // Valuation calculation and results display in Part 8
      }
    });

    // Toggle tooltips
    learnMoreSpans.forEach(span => {
      span.addEventListener('click', () => {
        const tipId = span.getAttribute('data-tip');
        const tip = document.getElementById(tipId);
        document.querySelectorAll('.explanation-box').forEach(t => {
          if (t !== tip) t.classList.add('hidden');
        });
        tip.classList.toggle('hidden');
      });
    });

    // Mobile menu toggle
    mobileMenuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  </script>
    <!-- Add canvas for chart and continue JavaScript for valuation and chart -->
  <canvas id="revenue-chart" class="mt-4" style="max-height: 300px;"></canvas>

  <script>
    // SaaS type multiplier adjustments
    const saasTypeMultipliers = {
      'ai-saas': 1, // +1 to base multiplier
      'fintech-saas': 0.5,
      'healthtech-saas': 0.5,
      'edtech-saas': 0.3,
      'vertical-saas': 0.4,
      'horizontal-saas': 0,
      'b2b-saas': 0.2,
      'b2c-saas': 0.1,
      'crm-saas': -0.2,
      'marketing-saas': -0.1,
      'hrtech-saas': 0.2,
      'cybersecurity-saas': 0.6,
      'ecommerce-saas': 0,
      'collaboration-saas': -0.1,
      'other-saas': 0
    };

    // Calculate valuation for each method
    function calculateValuation() {
      const arr = parseFloat(document.getElementById('arr').value) || 0;
      const mrr = parseFloat(document.getElementById('mrr').value) || 0;
      const grossMargin = parseFloat(document.getElementById('gross-margin').value) || 0;
      const yoyGrowth = parseFloat(document.getElementById('yoy-growth').value) || 0;
      const saasType = document.getElementById('saas-type').value;
      const methods = Array.from(document.querySelectorAll('input[name="valuation-methods"]:checked')).map(m => m.value);
      const valuations = [];

      // Base multiplier for Revenue Multiplier
      let baseMultiplier = 3;
      const saasMultiplier = saasTypeMultipliers[saasType] || 0;
      const adjustedMultiplier = baseMultiplier + saasMultiplier;

      // Revenue Multiplier
      if (methods.includes('revenue-multiplier')) {
        const valuation = arr * adjustedMultiplier;
        valuations.push(valuation);
      }

      // Income-Based (simplified: net income = MRR * gross margin * 12)
      if (methods.includes('income-based')) {
        const netIncome = (mrr * (grossMargin / 100) * 12);
        const valuation = netIncome * 10; // 10x net income
        valuations.push(valuation);
      }

      // DCF (simplified: 5-year cash flow projection with 10% discount rate)
      if (methods.includes('dcf')) {
        let dcfValue = 0;
        const discountRate = 0.1;
        for (let year = 1; year <= 5; year++) {
          const projectedRevenue = arr * Math.pow(1 + (yoyGrowth / 100), year);
          const discountedCashFlow = projectedRevenue / Math.pow(1 + discountRate, year);
          dcfValue += discountedCashFlow;
        }
        valuations.push(dcfValue);
      }

      // Earnings-Based (simplified: EBITDA = MRR * gross margin * 12)
      if (methods.includes('earnings-based')) {
        const ebitda = (mrr * (grossMargin / 100) * 12);
        const valuation = ebitda * 8; // 8x EBITDA
        valuations.push(valuation);
      }

      // Calculate valuation range and SaaS type impact
      const minValuation = valuations.length > 0 ? Math.min(...valuations) : 0;
      const maxValuation = valuations.length > 0 ? Math.max(...valuations) : 0;
      const saasTypeImpact = methods.includes('revenue-multiplier') ? (saasMultiplier / baseMultiplier) * 100 : 0;

      return { minValuation, maxValuation, saasTypeImpact };
    }

    // Display valuation results
    function displayResults() {
      const { minValuation, maxValuation, saasTypeImpact } = calculateValuation();
      const rangeText = minValuation === maxValuation
        ? formatNumber(minValuation, '$')
        : `${formatNumber(minValuation, '$')} - ${formatNumber(maxValuation, '$')}`;
      const impactText = saasTypeImpact === 0
        ? 'No impact (Revenue Multiplier not selected)'
        : `${saasTypeImpact > 0 ? '+' : ''}${saasTypeImpact.toFixed(1)}% due to SaaS type multiplier`;

      document.getElementById('valuation-range').textContent = rangeText;
      document.getElementById('saas-type-impact').textContent = impactText;
    }

    // Initialize revenue projection chart
    function initChart() {
      const arr = parseFloat(document.getElementById('arr').value) || 0;
      const yoyGrowth = parseFloat(document.getElementById('yoy-growth').value) || 0;
      const ctx = document.getElementById('revenue-chart').getContext('2d');
      const years = Array.from({ length: 6 }, (_, i) => new Date().getFullYear() + i);
      const revenues = years.map((_, i) => arr * Math.pow(1 + (yoyGrowth / 100), i));

      new Chart(ctx, {
        type: 'line',
        data: {
          labels: years,
          datasets: [{
            label: 'Projected Revenue ($)',
            data: revenues,
            borderColor: '#14b8a6', // teal-500
            backgroundColor: 'rgba(20, 184, 166, 0.2)',
            fill: true,
            tension: 0.3
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Revenue ($)' }
            },
            x: {
              title: { display: true, text: 'Year' }
            }
          },
          plugins: {
            legend: { display: true, position: 'top' }
          }
        }
      });
    }

    // Update submit event listener to include valuation and chart
    document.getElementById('submit').removeEventListener('click', window.submitHandler); // Remove old handler
    window.submitHandler = () => {
      if (validateStep(currentStep)) {
        document.getElementById('results').classList.remove('hidden');
        form.classList.add('hidden');
        displayResults();
        initChart();
      }
    };
    document.getElementById('submit').addEventListener('click', window.submitHandler);
  </script>
    <script>
    // Generate PDF report with valuation results and chart
    function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const pageWidth = doc.internal.pageSize.getWidth();
      const margin = 20;
      let yPos = 20;

      // Helper function to add text with wrapping
      function addText(text, x, y, options = {}) {
        doc.text(text, x, y, options);
        return y + (options.lineHeight || 6);
      }

      // Helper function to add section header
      function addHeader(text) {
        doc.setFontSize(16);
        doc.setTextColor('#14b8a6'); // teal-500
        doc.setFont('helvetica', 'bold');
        yPos = addText(text, margin, yPos);
        doc.setFontSize(12);
        doc.setTextColor('#000000');
        doc.setFont('helvetica', 'normal');
        yPos += 2;
      }

      // Title
      doc.setFontSize(20);
      doc.setTextColor('#1f2937'); // gray-800
      doc.setFont('helvetica', 'bold');
      yPos = addText('SaaS Valuation Report', margin, yPos, { lineHeight: 8 });
      doc.setFontSize(12);
      doc.setTextColor('#000000');
      doc.setFont('helvetica', 'normal');
      yPos += 5;

      // Company Details
      addHeader('Company Details');
      const name = document.getElementById('name').value || 'N/A';
      const company = document.getElementById('company').value || 'N/A';
      const email = document.getElementById('email').value || 'N/A';
      yPos = addText(`Name: ${name}`, margin, yPos);
      yPos = addText(`Company: ${company}`, margin, yPos);
      yPos = addText(`Email: ${email}`, margin, yPos);
      yPos += 5;

      // Valuation Summary
      addHeader('Valuation Summary');
      const { minValuation, maxValuation, saasTypeImpact } = calculateValuation();
      const rangeText = minValuation === maxValuation
        ? formatNumber(minValuation, '$')
        : `${formatNumber(minValuation, '$')} - ${formatNumber(maxValuation, '$')}`;
      const saasType = document.getElementById('saas-type').options[document.getElementById('saas-type').selectedIndex].text;
      const impactText = saasTypeImpact === 0
        ? 'No impact (Revenue Multiplier not selected)'
        : `${saasTypeImpact > 0 ? '+' : ''}${saasTypeImpact.toFixed(1)}% due to ${saasType} multiplier`;
      yPos = addText(`Valuation Range: ${rangeText}`, margin, yPos);
      yPos = addText(`SaaS Type Impact: ${impactText}`, margin, yPos);
      yPos += 5;

      // Key Metrics
      addHeader('Key Metrics');
      const methods = Array.from(document.querySelectorAll('input[name="valuation-methods"]:checked')).map(m => m.value).join(', ') || 'None';
      yPos = addText(`SaaS Type: ${saasType}`, margin, yPos);
      yPos = addText(`Valuation Methods: ${methods}`, margin, yPos);
      yPos = addText(`ARR: ${formatNumber(document.getElementById('arr').value, '$')}`, margin, yPos);
      yPos = addText(`MRR: ${formatNumber(document.getElementById('mrr').value, '$')}`, margin, yPos);
      yPos = addText(`Gross Margin: ${formatNumber(document.getElementById('gross-margin').value, '', '%')}`, margin, yPos);
      yPos = addText(`YoY Growth: ${formatNumber(document.getElementById('yoy-growth').value, '', '%')}`, margin, yPos);
      yPos = addText(`NRR: ${formatNumber(document.getElementById('nrr').value, '', '%')}`, margin, yPos);
      yPos = addText(`CAC: ${formatNumber(document.getElementById('cac').value, '$')}`, margin, yPos);
      yPos = addText(`LTV: ${formatNumber(document.getElementById('ltv').value, '$')}`, margin, yPos);
      yPos = addText(`Churn Rate: ${formatNumber(document.getElementById('churn').value, '', '%')}`, margin, yPos);
      yPos = addText(`TAM: ${formatNumber(document.getElementById('tam').value, '$', 'M')}`, margin, yPos);
      yPos = addText(`Employee Count: ${formatNumber(document.getElementById('employee-count').value)}`, margin, yPos);
      yPos = addText(`Funding Raised: ${formatNumber(document.getElementById('funding').value, '$', 'M')}`, margin, yPos);
      yPos += 5;

      // Check for page break before adding chart
      if (yPos > 250) {
        doc.addPage();
        yPos = 20;
      }

      // Revenue Projection Chart
      addHeader('5-Year Revenue Projection');
      const canvas = document.getElementById('revenue-chart');
      const chartImage = canvas.toDataURL('image/png');
      doc.addImage(chartImage, 'PNG', margin, yPos, 150, 75); // Scale to 150x75mm
      yPos += 80;

      // Save PDF with dynamic filename
      const today = new Date().toISOString().slice(0, 10); // e.g., 2025-05-10
      doc.save(`SaaS_Valuation_Report_${today}.pdf`);
    }

    // Event listener for PDF download
    document.getElementById('download-pdf').addEventListener('click', () => {
      generatePDF();
    });
  </script>
    <!-- Footer -->
  <footer class="bg-gray-800 text-gray-300 py-6">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h2 class="text-lg font-semibold text-white">SaaS Valuation Pro</h2>
        <p class="mt-2 text-sm">© 2025 SaaS Valuation Pro. All rights reserved.</p>
        <div class="mt-4 flex justify-center space-x-4">
          <a href="/privacy" class="text-sm hover:text-white transition-colors duration-300">Privacy Policy</a>
          <a href="/terms" class="text-sm hover:text-white transition-colors duration-300">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Final JavaScript for error handling, analytics, and form reset -->
  <script>
    // Error handling for form submission and PDF generation
    function handleError(error, context) {
      console.error(`Error in ${context}:`, error);
      alert(`An error occurred while ${context}. Please try again or contact support.`);
    }

    // Analytics tracking (placeholder)
    function trackEvent(eventName, properties = {}) {
      // Replace with actual analytics service (e.g., Google Analytics, Mixpanel)
      console.log(`Tracking event: ${eventName}`, properties);
      // Example: gtag('event', eventName, properties);
    }

    // Reset form and return to Step 1
    function resetForm() {
      form.reset();
      steps.forEach(s => s.classList.remove('step-visible'));
      document.getElementById('step-1').classList.add('step-visible');
      progressBar.style.width = '12.5%';
      document.getElementById('results').classList.add('hidden');
      form.classList.remove('hidden');
      currentStep = 1;
      trackEvent('form_reset');
    }

    // Update submit handler with error handling and analytics
    document.getElementById('submit').removeEventListener('click', window.submitHandler);
    window.submitHandler = () => {
      try {
        if (validateStep(currentStep)) {
          document.getElementById('results').classList.remove('hidden');
          form.classList.add('hidden');
          displayResults();
          initChart();
          trackEvent('form_submit', {
            saasType: document.getElementById('saas-type').value,
            valuationMethods: Array.from(document.querySelectorAll('input[name="valuation-methods"]:checked')).map(m => m.value)
          });
        }
      } catch (error) {
        handleError(error, 'form submission');
      }
    };
    document.getElementById('submit').addEventListener('click', window.submitHandler);

    // Update PDF download handler with error handling and analytics
    document.getElementById('download-pdf').removeEventListener('click', generatePDF);
    document.getElementById('download-pdf').addEventListener('click', () => {
      try {
        generatePDF();
        trackEvent('pdf_download', {
          company: document.getElementById('company').value || 'N/A',
          valuationRange: document.getElementById('valuation-range').textContent
        });
      } catch (error) {
        handleError(error, 'PDF generation');
      }
    });

    // Add Start Over button to results section
    const resultsSection = document.getElementById('results');
    const startOverButton = document.createElement('button');
    startOverButton.id = 'start-over';
    startOverButton.className = 'bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors duration-300 mt-4 ml-4';
    startOverButton.textContent = 'Start Over';
    startOverButton.addEventListener('click', resetForm);
    resultsSection.appendChild(startOverButton);
  </script>

  <!-- Closing tags -->
  </main>
</body>
</html>
      
